# dist5 æŸœä½“å®šåˆ¶ä¸å…¨å±‹è£…ä¿®ç³»ç»Ÿå®Œæ•´æ¶æ„åˆ†æ

> **æ–‡æ¡£è¯´æ˜**: æœ¬æ–‡æ¡£åŸºäº dist5/ ç›®å½•ä¸‹çš„çœŸå®æºç è¿›è¡Œæ·±åº¦åˆ†æï¼Œæ¶µç›–æŸœä½“å®šåˆ¶ã€å…¨å±‹è£…ä¿®ã€äº”é‡‘ç³»ç»Ÿã€ç¢°æ’æ£€æµ‹ã€ç®¡é“é¿è®©ã€è·¯å¾„ç”Ÿæˆå’Œå›½æ ‡éªŒè¯çš„å®Œæ•´æŠ€æœ¯æ¶æ„ã€‚æ‰€æœ‰ä»£ç å¼•ç”¨å‡æ ‡æ³¨ç²¾ç¡®çš„æ–‡ä»¶è·¯å¾„å’Œè¡Œå·ã€‚

## ğŸ“‹ æ–‡æ¡£ç›®å½•

- [ç¬¬ä¸€éƒ¨åˆ†ï¼šç³»ç»Ÿæ¦‚è§ˆ](#ç¬¬ä¸€éƒ¨åˆ†ç³»ç»Ÿæ¦‚è§ˆ)
- [ç¬¬äºŒéƒ¨åˆ†ï¼šæŸœä½“å®šåˆ¶ç³»ç»Ÿæ·±åº¦æ¶æ„](#ç¬¬äºŒéƒ¨åˆ†æŸœä½“å®šåˆ¶ç³»ç»Ÿæ·±åº¦æ¶æ„)
- [ç¬¬ä¸‰éƒ¨åˆ†ï¼šäº”é‡‘ç³»ç»Ÿå®Œæ•´æ¶æ„](#ç¬¬ä¸‰éƒ¨åˆ†äº”é‡‘ç³»ç»Ÿå®Œæ•´æ¶æ„)
- [ç¬¬å››éƒ¨åˆ†ï¼šç¢°æ’æ£€æµ‹ä¸å¸ƒå°”å»ºæ¨¡ç³»ç»Ÿ](#ç¬¬å››éƒ¨åˆ†ç¢°æ’æ£€æµ‹ä¸å¸ƒå°”å»ºæ¨¡ç³»ç»Ÿ)
- [ç¬¬äº”éƒ¨åˆ†ï¼šç®¡é“é¿è®©ä¸MEPé›†æˆ](#ç¬¬äº”éƒ¨åˆ†ç®¡é“é¿è®©ä¸mepé›†æˆ)
- [ç¬¬å…­éƒ¨åˆ†ï¼šè·¯å¾„ç”Ÿæˆä¸CNCä¼˜åŒ–](#ç¬¬å…­éƒ¨åˆ†è·¯å¾„ç”Ÿæˆä¸cncä¼˜åŒ–)
- [ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå›½æ ‡éªŒè¯ç³»ç»Ÿ](#ç¬¬ä¸ƒéƒ¨åˆ†å›½æ ‡éªŒè¯ç³»ç»Ÿ)
- [ç¬¬å…«éƒ¨åˆ†ï¼šBOMä¸è®¢å•ç³»ç»Ÿ](#ç¬¬å…«éƒ¨åˆ†bomä¸è®¢å•ç³»ç»Ÿ)
- [ç¬¬ä¹éƒ¨åˆ†ï¼šå…¨å±‹è£…ä¿®ç³»ç»Ÿæ¶æ„](#ç¬¬ä¹éƒ¨åˆ†å…¨å±‹è£…ä¿®ç³»ç»Ÿæ¶æ„)
- [ç¬¬åéƒ¨åˆ†ï¼šæŠ€æœ¯å®ç°ç»†èŠ‚](#ç¬¬åéƒ¨åˆ†æŠ€æœ¯å®ç°ç»†èŠ‚)

---

## ç¬¬ä¸€éƒ¨åˆ†ï¼šç³»ç»Ÿæ¦‚è§ˆ

### 1.1 æŠ€æœ¯æ ˆæ¶æ„

#### æ ¸å¿ƒæŠ€æœ¯æ¡†æ¶
```
å¾®å‰ç«¯æ¶æ„ (Micro-Frontend)
â”œâ”€â”€ KAF æ’ä»¶æ¡†æ¶ (Kujiale Application Framework)
â”œâ”€â”€ React + Redux çŠ¶æ€ç®¡ç†
â”œâ”€â”€ WebAssembly å‡ ä½•è®¡ç®—åŠ é€Ÿ
â”œâ”€â”€ Three.js 3Dæ¸²æŸ“å¼•æ“
â””â”€â”€ BIM å»ºç­‘ä¿¡æ¯æ¨¡å‹é›†æˆ
```

**æ¶æ„ç‰¹ç‚¹**:
- **å¾®å‰ç«¯**: å„æ¨¡å—ç‹¬ç«‹éƒ¨ç½²ï¼ŒæŒ‰éœ€åŠ è½½
- **æ’ä»¶åŒ–**: ç»Ÿä¸€çš„KAFæ’ä»¶è§„èŒƒ
- **æ‡’åŠ è½½**: Webpack code-splittingä¼˜åŒ–
- **å›½é™…åŒ–**: å¤šè¯­è¨€æ”¯æŒç³»ç»Ÿ

#### æ¨¡å—åˆ†å¸ƒç»Ÿè®¡

| ç³»ç»Ÿç±»åˆ« | ä¸»ç›®å½• | æ¨¡å—æ•° | æ ¸å¿ƒåŠŸèƒ½ |
|---------|--------|--------|---------|
| æŸœä½“å®šåˆ¶ | `-tool-frontend-custom-custom-kaf/` | 40+ | æ©±æŸœ/è¡£æŸœ/é—¨çª—å®šåˆ¶ |
| å…¨å±‹è£…ä¿® | `-tool-frontend-decoration-*/` | 15+ | 2D/3Dè£…ä¿®è®¾è®¡ |
| æ°´æš–ç”µMEP | `-BIM-App-micro-drawing-kaf/` | 1 (560Kè¡Œ) | æœºç”µç®¡çº¿ç³»ç»Ÿ |
| å»ºç­‘ç¡¬è£… | `-kam-arch-frontend-*/` | 8+ | å»ºç­‘ç»“æ„è®¾è®¡ |
| é€ å‹è®¾è®¡ | `-DIY-yundesign-plugins-group-*/` | 6+ | èƒŒæ™¯å¢™/åŠé¡¶ |

**æ•°æ®æ¥æº**: `dist5/æ¨¡å—æœç´¢ç»“æœæ±‡æ€».md` ç¬¬äºŒç« 

### 1.2 æ–‡ä»¶ç»„ç»‡æ¶æ„

```
dist5/static/
â”œâ”€â”€ -tool-frontend-custom-custom-kaf/          # æŸœä½“å®šåˆ¶ä¸»ç³»ç»Ÿ
â”‚   â””â”€â”€ micros/custom-bim-plugin/
â”‚       â”œâ”€â”€ entry.e6c2d181dc7975bf38d6.js      # ä¸»å…¥å£ (å·²webpackæ‰“åŒ…)
â”‚       â””â”€â”€ entry.e6c2d181dc7975bf38d6_dewebpack/  # è§£åŒ…åæ¨¡å—
â”‚           â”œâ”€â”€ module_addhardware.js           # äº”é‡‘æ·»åŠ 
â”‚           â”œâ”€â”€ module_deletehardware.js        # äº”é‡‘åˆ é™¤
â”‚           â”œâ”€â”€ module_splitdoor.js             # é—¨æ¿åˆ†å‰²
â”‚           â”œâ”€â”€ module_generate.js              # ç”Ÿæˆé€»è¾‘
â”‚           â””â”€â”€ ... (60+ä¸ªæ¨¡å—æ–‡ä»¶)
â”‚
â”œâ”€â”€ -BIM-App-micro-drawing-kaf/                # MEPç³»ç»Ÿ
â”‚   â””â”€â”€ micros/kujiale-bim-tool-page-micro-drawings-kaf-plugin/
â”‚       â””â”€â”€ entry.35a7ba9eea6ab72cc433_dewebpack/
â”‚           â””â”€â”€ module_2ged.js                  # ç»„ä»¶ç±»å‹å®šä¹‰
â”‚
â””â”€â”€ -tool-frontend-decoration-decoration-yundesign-plugin/  # è£…ä¿®ç³»ç»Ÿ
    â””â”€â”€ micros/decoration-bim-plugin/
        â””â”€â”€ entry.7fab129a606ec7d80dcb.js
```

---

## ç¬¬äºŒéƒ¨åˆ†ï¼šæŸœä½“å®šåˆ¶ç³»ç»Ÿæ·±åº¦æ¶æ„

### 2.1 ç³»ç»Ÿå…¥å£ä¸æ¨¡å—ç»“æ„

#### 2.1.1 æ ¸å¿ƒå…¥å£æ–‡ä»¶
```
ä¸»ç›®å½•: dist5/static/-tool-frontend-custom-custom-kaf/
â”œâ”€â”€ micros/custom-bim-plugin/
â”‚   â”œâ”€â”€ entry.e6c2d181dc7975bf38d6.js    (ä¸»å…¥å£)
â”‚   â””â”€â”€ entry.21559e48fdff76a76547.css   (æ ·å¼)
```

**æ’ä»¶æ ‡è¯†**: `custom-bim-plugin`  
**å¿«æ·é”®æ˜ å°„**: 
- è¡£æŸœ: `v` (`custom-wardrobe-plugin-copy`)
- å®šåˆ¶DW: `x` (`custom-dw-plugin-copy`)

**ä»£ç å‡ºå¤„**: `dist5/æ¨¡å—æœç´¢ç»“æœæ±‡æ€».md` è¡Œ132-136

#### 2.1.2 æŸœä½“ç±»å‹ç³»ç»Ÿ

æ ¹æ®æºç åˆ†æï¼Œç³»ç»Ÿæ”¯æŒä¸‰å¤§æ ¸å¿ƒç±»å‹ï¼š

```typescript
// æŸœä½“ç±»å‹æšä¸¾
enum CustomType {
  CABINET = "CABINET",           // æ©±æŸœ
  WARDROBE = "WARDROBE",         // è¡£æŸœ
  DOOR_WINDOW = "DOOR_WINDOW",   // é—¨çª— (DW)
  
  // å‰¯æœ¬ç±»å‹ï¼ˆç”¨äºå¤åˆ¶æ“ä½œï¼‰
  CABINET_COPY = "CABINET_COPY",
  WARDROBE_COPY = "WARDROBE_COPY",
  DOOR_WINDOW_COPY = "DOOR_WINDOW_COPY"
}
```

**ä»£ç å‡ºå¤„**: æ¨æ–­è‡ª `module_2ged.js` è¡Œ162-704 çš„ç»„ä»¶å®šä¹‰

**åº”ç”¨åœºæ™¯**:
1. **ç±»å‹åˆ¤æ–­**: `customType === CustomType.CABINET`
2. **æƒé™æ§åˆ¶**: ä¸åŒç±»å‹æœ‰ä¸åŒçš„åŠŸèƒ½æƒé™
3. **UIé…ç½®**: æ ¹æ®ç±»å‹æ˜¾ç¤ºä¸åŒçš„å·¥å…·æ 

### 2.2 æŸœä½“æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼ˆ40+ä¸ªæ–‡ä»¶ï¼‰

#### 2.2.1 å°é¢ç³»ç»Ÿï¼ˆCountertop System - 9ä¸ªå­æ¨¡å—ï¼‰

```
å°é¢ç³»ç»Ÿæ¶æ„
â”œâ”€â”€ custom_lazy_countertop_comp.*.js          å°é¢ç»„ä»¶æ ¸å¿ƒ
â”œâ”€â”€ custom_lazy_countertop_plugin.*.js        å°é¢æ’ä»¶ä¸»é€»è¾‘
â”œâ”€â”€ custom_lazy_countertop_scenes.*.js        åœºæ™¯ç®¡ç†
â”œâ”€â”€ custom_lazy_countertop_slicingtool.*.js   åˆ‡ç‰‡å·¥å…·
â”œâ”€â”€ custom_lazy_countertop_tools.*.js         å·¥å…·é›†
â”œâ”€â”€ custom_lazy_countertop_fp_accessor.*.js   é…ä»¶ï¼ˆæ°´æ§½ã€ç¶å…·ï¼‰
â”œâ”€â”€ custom_lazy_countertop_fp_autogen.*.js    è‡ªåŠ¨ç”Ÿæˆé€»è¾‘
â”œâ”€â”€ custom_lazy_countertop_fp_draw.*.js       ç»˜åˆ¶å·¥å…·
â””â”€â”€ custom_lazy_countertop_fp_other.*.js      å…¶ä»–è¾…åŠ©åŠŸèƒ½
```

**åŠŸèƒ½æè¿°**:
- **å°é¢ç»„ä»¶**: å°é¢æ¿æçš„å‚æ•°åŒ–è®¾è®¡
- **é…ä»¶é›†æˆ**: æ°´æ§½(`sink`)ã€ç¶å…·(`cooktop`)çš„åµŒå…¥
- **è‡ªåŠ¨ç”Ÿæˆ**: æ ¹æ®æ©±æŸœå°ºå¯¸è‡ªåŠ¨ç”Ÿæˆå°é¢
- **åˆ‡ç‰‡å·¥å…·**: å°é¢çš„åˆ‡å‰²å’Œä¼˜åŒ–

**ä»£ç å‡ºå¤„**: `dist5/æ¨¡å—æœç´¢ç»“æœæ±‡æ€».md` è¡Œ160-169

#### 2.2.2 é—¨æ¿æŠ½å±‰ç³»ç»Ÿï¼ˆDoor & Drawer Systemï¼‰

**æ ¸å¿ƒåŠŸèƒ½å®ç°**:

```javascript
// æŠ½å±‰ç±»å‹å®šä¹‰
const DrawerTypes = {
  STANDARD: "standard",        // æ ‡å‡†æŠ½å±‰
  WITH_BOARD: "with_board"     // å¸¦æ¿æŠ½å±‰
};

// é—¨æ¿ç±»å‹å®šä¹‰
const DoorTypes = {
  SWING: "swing_door",         // å¹³å¼€é—¨
  SLIDING: "sliding_door",     // æ¨æ‹‰é—¨
  SEGMENT: "segment_door"      // åˆ†æ®µé—¨
};
```

**é—¨æ¿åˆ†å‰²ç®—æ³•** (`module_splitdoor.js` è¡Œ1-251):

```javascript
// é—¨æ¿åˆ†å‰²ä¸»æµç¨‹
async function splitDoor(originalDoor, splitData) {
  // 1. è·å–å¸ƒå°”ç‰ˆæœ¬
  const boolVersion = getBoolBizVersion(originalDoor);
  
  // 2. è·å–åŸå§‹å¸ƒå°”æ¨¡å‹ï¼ˆç”¨äºåˆ†å‰ï¼‰
  const originBoolModels = getOriginBoolModelsForForkBoolInSelf(originalDoor)
    .filter(model => !isAncestor(originalDoor, model));
  
  // 3. æ¸…ç†å»ºæ¨¡æ•ˆæœ
  await cleanModelingEffect(originalDoor, {
    needRemoveMountBool: true  // ç§»é™¤æŒ‚è½½çš„å¸ƒå°”æ¨¡å‹
  });
  
  // 4. å¤„ç†æ–°é—¨æ¿
  const { doorWrapper, newDoors } = splitData;
  const doorsWithBool = [];
  const clonedBoolModels = [];
  
  for (const newDoor of newDoors) {
    // 4.1 è®¿é—®æ¯ä¸ªæ–°é—¨æ¿ï¼Œæ£€æŸ¥å¸ƒå°”å¹²æ¶‰æ¨¡å‹
    newDoor.visit(function(element) {
      if (element.hasBoolInterferenceModels()) {
        const interferenceModels = element.getBoolInterferenceModels() || [];
        
        interferenceModels.forEach(boolModel => {
          const boolAppend = boolModel.getBoolAppend();
          if (boolAppend) {
            // ç§»é™¤é™„åŠ çš„å¸ƒå°”æ¨¡å‹
            element.removeBoolInterferenceModel(boolModel);
          } else {
            // è®¾ç½®ä¸»æ¨¡å‹IDå’Œç‰ˆæœ¬
            setMainModelId(boolModel, boolModel.getParent()?.getId());
            setBoolBizVersion(boolModel, boolVersion);
          }
        });
      }
    });
    
    // 4.2 å…‹éš†åŸå§‹å¸ƒå°”æ¨¡å‹åˆ°æ–°é—¨æ¿
    for (const originBool of originBoolModels) {
      const clonedBool = await fitClonedBoolModel(newDoor, originBool);
      newDoor.addBoolInterferenceModel(clonedBool);
      clonedBoolModels.push(clonedBool);
    }
    
    doorsWithBool.push(newDoor);
  }
  
  // 5. æ„å»ºå¸ƒå°”æ¨¡å‹
  if (clonedBoolModels.length) {
    await buildBoolModels(clonedBoolModels);
  }
  
  // 6. æ„å»ºæŒ‚è½½æ¨¡å‹
  if (doorsWithBool.length) {
    await buildMountModels(newDoors);
  }
  
  // 7. æ¸…ç†åŸé—¨æ¿åŒ…è£…å™¨çš„å¹²æ¶‰æ¨¡å‹
  const wrapperInterferences = doorWrapper?.getBoolInterferenceModels();
  wrapperInterferences?.forEach(model => {
    doorWrapper.removeBoolInterferenceModel(model);
  });
  
  // 8. è®°å½•æ—¥å¿—
  logForSplitDoor(originalDoor);
}
```

**ä»£ç å‡ºå¤„**: 
- `entry.e6c2d181dc7975bf38d6_dewebpack/module_splitdoor.js` è¡Œ1-251

**ç³»ç»Ÿç‰¹æ€§**:
1. **é—¨æ¿è®¾è®¡**: æ”¯æŒå¤šç§å¼€å¯æ–¹å¼ï¼ˆå¹³å¼€ã€æ¨æ‹‰ã€æŠ˜å ï¼‰
2. **æŠ½å±‰é…ç½®**: æ ‡å‡†æŠ½å±‰ã€å¸¦éš”æ¿æŠ½å±‰
3. **äº”é‡‘é›†æˆ**: é“°é“¾ã€æŠŠæ‰‹ã€è½¨é“çš„è‡ªåŠ¨é…ç½®
4. **å°ºå¯¸çº¦æŸ**: 

é—¨æ¿å°ºå¯¸ä¸æ¡†æ¶çš„é€‚é…æ£€æŸ¥
5. **åˆ†å‰²ç®—æ³•**: æ”¯æŒé—¨æ¿çš„æ™ºèƒ½åˆ†å‰²ä¸å¸ƒå°”æ¨¡å‹å…‹éš†

---

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šäº”é‡‘ç³»ç»Ÿå®Œæ•´æ¶æ„

### 3.1 äº”é‡‘ç³»ç»Ÿæ¦‚è¿°

äº”é‡‘ç³»ç»Ÿæ˜¯æŸœä½“å®šåˆ¶çš„æ ¸å¿ƒå­ç³»ç»Ÿï¼Œè´Ÿè´£ç®¡ç†æ‰€æœ‰ç¡¬ä»¶é…ä»¶ï¼ˆé“°é“¾ã€æ»‘è½¨ã€æŠŠæ‰‹ã€æ‹‰ç¯®ç­‰ï¼‰çš„æ·»åŠ ã€åˆ é™¤ã€é…ç½®å’ŒéªŒè¯ã€‚

**ç³»ç»Ÿæ–‡ä»¶**:
- `module_addhardware.js` - äº”é‡‘æ·»åŠ é€»è¾‘
- `module_deletehardware.js` - äº”é‡‘åˆ é™¤é€»è¾‘
- `module_2ged.js` - äº”é‡‘ç±»å‹å®šä¹‰

### 3.2 äº”é‡‘ç»„ä»¶ç±»å‹å®šä¹‰

æ ¹æ® `module_2ged.js` (è¡Œ428-598) çš„æºç åˆ†æï¼Œç³»ç»Ÿæ”¯æŒä»¥ä¸‹äº”é‡‘ç±»å‹ï¼š

```typescript
// äº”é‡‘çº¿è·¯ç±»å‹ï¼ˆhardwareLineï¼‰
const HardwareTypes = {
  // åŸºç¡€é“°é“¾ (è¡Œ428-435)
  HINGE_2032: 2032,        // é“°é“¾ç±»å‹1
  HINGE_2033: 2033,        // é“°é“¾ç±»å‹2
  HINGE_2034: 2034,        // é“°é“¾ç±»å‹3
  HINGE_2035: 2035,        // é“°é“¾ç±»å‹4
  HINGE_2036: 2036,        // é“°é“¾ç±»å‹5
  HINGE_2038: 2038,        // é“°é“¾ç±»å‹6
  HINGE_2039: 2039,        // é“°é“¾ç±»å‹7
  HINGE_2040: 2040,        // é“°é“¾ç±»å‹8
  
  // æŠŠæ‰‹ç³»ç»Ÿ (è¡Œ437-440)
  HANDLE_509: 509,         // æŠŠæ‰‹
  HANDLE_NEG_509: -509,    // æŠŠæ‰‹ï¼ˆè´Ÿå€¼å˜ä½“ï¼‰
  HANDLE_441: 441,         // æŠŠæ‰‹ç±»å‹2
  HANDLE_963: 963,         // æŠŠæ‰‹ç±»å‹3
  
  // æ»‘è½¨ç³»ç»Ÿ (è¡Œ440-453)
  SLIDE_462: 462,          // æ»‘è½¨1
  SLIDE_463: 463,          // æ»‘è½¨2
  SLIDE_464: 464,          // æ»‘è½¨3
  SLIDE_614: 614,          // æ»‘è½¨4
  SLIDE_596: 596,          // æ»‘è½¨5
  SLIDE_694: 694,          // æ»‘è½¨6
  SLIDE_590: 590,          // æ»‘è½¨7
  SLIDE_591: 591,          // æ»‘è½¨8
  SLIDE_592: 592,          // æ»‘è½¨9
  SLIDE_593: 593,          // æ»‘è½¨10
  SLIDE_594: 594,          // æ»‘è½¨11
  SLIDE_595: 595,          // æ»‘è½¨12
  
  // è¾…åŠ©äº”é‡‘ (è¡Œ453-460)
  ACCESSORY_715: 715,      // é…ä»¶1
  ACCESSORY_716: 716,      // é…ä»¶2
  ACCESSORY_778: 778,      // é…ä»¶3
  ACCESSORY_640: 640,      // é…ä»¶4
  ACCESSORY_641: 641,      // é…ä»¶5
  ACCESSORY_779: 779,      // é…ä»¶6
  ACCESSORY_455: 455,      // é…ä»¶7
  ACCESSORY_457: 457,      // é…ä»¶8
  ACCESSORY_459: 459,      // é…ä»¶9
  
  // æ‹‰ç¯®ç³»ç»Ÿ (è¡Œ461-476)
  BASKET_985_1000: [985, 986, 987, 988, 989, 990, 991, 992, 993, 994, 995, 996, 997, 998, 999, 1000],
  
  // 2000ç³»åˆ—äº”é‡‘ (è¡Œ477-488)
  HARDWARE_2000_SERIES: [2000, -2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2100],
};

// æ€»è®¡: 60+ç§äº”é‡‘ç±»å‹
```

**ä»£ç å‡ºå¤„**: `module_2ged.js` è¡Œ428-489

### 3.3 äº”é‡‘å†…éƒ¨åç§°æ˜ å°„

ç³»ç»Ÿä¸ºæ¯ç§äº”é‡‘é…ä»¶æä¾›äº†å†…éƒ¨åç§°æ˜ å°„ï¼Œæ”¯æŒæ©±æŸœ(cabinet)ã€è¡£æŸœ(wardrobe)ã€é—¨çª—(dw)ä¸‰ç§åœºæ™¯ï¼š

```javascript
// äº”é‡‘å†…éƒ¨åç§°æ•°ç»„ (è¡Œ490-598)
const hardwareLineInternalNames = [
  // æ©±æŸœå’Œè¡£æŸœé€šç”¨äº”é‡‘
  "cabinet_2100", "wardrobe_2100",  
  "cabinet_590", "wardrobe_590",   
  "cabinet_591", "wardrobe_591",    
  // ... å…±120+ä¸ªæ˜ å°„åç§°
  
  // é—¨çª—ä¸“ç”¨äº”é‡‘ (è¡Œ584-597)
  "dw_2032", "dw_2033", "dw_2034",  
  "dw_2035", "dw_2036", "dw_2038",  
  "dw_2039", "dw_2040",             
  "dw_509",                         
];
```

**å‘½åè§„åˆ™**:
- `cabinet_[ID]` - æ©±æŸœä¸“ç”¨äº”é‡‘
- `wardrobe_[ID]` - è¡£æŸœä¸“ç”¨äº”é‡‘
- `dw_[ID]` - é—¨çª—ä¸“ç”¨äº”é‡‘

**ä»£ç å‡ºå¤„**: `module_2ged.js` è¡Œ490-598

### 3.4 äº”é‡‘æ·»åŠ æµç¨‹

**æ ¸å¿ƒç®—æ³•** (`module_addhardware.js`):

```javascript
async function addHardware(addHardwareDatas) {
  try {
    // 1. éå†æ¯ä¸ªäº”é‡‘é…ä»¶
    for (const hardwareData of addHardwareDatas) {
      const hardware = hardwareData.hardware;
      
      // 2. æ£€æŸ¥æ˜¯å¦åŒ…å«å¸ƒå°”æ¨¡å‹
      const containsBool = containsBoolModel(hardware);
      
      if (containsBool) {
        // 3. è®¿é—®ç¡¬ä»¶æ¨¡å‹æ ‘
        hardware.visit(function(element) {
          // 4. æ£€æŸ¥å¸ƒå°”å¹²æ¶‰æ¨¡å‹
          if (element.hasBoolInterferenceModels()) {
            const interferenceModels = element.getBoolInterferenceModels() || [];
            
            // 5. å¤„ç†æ¯ä¸ªå¹²æ¶‰æ¨¡å‹
            interferenceModels.forEach(function(boolModel) {
              // è®¾ç½®ä¸»æ¨¡å‹ID
              setMainModelId(boolModel, boolModel.getParent()?.getId());
              // è®¾ç½®å¸ƒå°”ä¸šåŠ¡ç‰ˆæœ¬
              setBoolBizVersion(boolModel);
            });
          }
        });
      }
      
      // 6. è®°å½•æ—¥å¿—
      logForAddHardWare(hardware);
    }
  } catch (error) {
    // é”™è¯¯å¤„ç†
    const hardwareNames = addHardwareDatas.map(d => d.hardware?.getName());
    boolAddHardWareHookError({
      hardwareNames: JSON.stringify(hardwareNames),
      isNewHook: "true"
    }, error);
  }
}
```

**ä»£ç å‡ºå¤„**: `module_addhardware.js` è¡Œ1-95

### 3.5 äº”é‡‘åˆ é™¤æµç¨‹

**æ ¸å¿ƒç®—æ³•** (`module_deletehardware.js`):

```javascript
async function deleteHardware(hardwaresToDelete) {
  // 1. è¿‡æ»¤å‡ºåŒ…å«å¸ƒå°”æ¨¡å‹çš„äº”é‡‘
  const hardwaresWithBool = hardwaresToDelete.filter(hw => 
    containsBoolModel(hw)
  );
  
  try {
    const affectedModels = new Set();
    
    // 2. æ¸…ç†æ¯ä¸ªäº”é‡‘çš„å»ºæ¨¡æ•ˆæœ
    for (const hardware of hardwaresWithBool) {
      logForDeleteHardWare(hardware);
      
      const cleanedModels = await cleanModelingEffect(hardware, {
        needRemoveMountBool: true
      });
      
      cleanedModels.forEach(model => affectedModels.add(model));
    }
    
    // 3. é‡æ–°æ„å»ºå—å½±å“çš„æŒ‚è½½æ¨¡å‹
    if (affectedModels.size > 0) {
      await buildMountModels(Array.from(affectedModels));
    }
  } catch (error) {
    boolDeleteHardWareHookError({
      hardwareNames: JSON.stringify(hardwaresToDelete.map(hw => hw?.getName())),
      isNewHook: "true"
    }, error);
  }
}
```

**ä»£ç å‡ºå¤„**: `module_deletehardware.js` è¡Œ1-104

---

## ç¬¬å››éƒ¨åˆ†ï¼šç¢°æ’æ£€æµ‹ä¸å¸ƒå°”å»ºæ¨¡ç³»ç»Ÿ

### 4.1 ç¢°æ’æ£€æµ‹æ¦‚è¿°

ç¢°æ’æ£€æµ‹ç³»ç»Ÿè´Ÿè´£æ£€æµ‹æŸœä½“ç»„ä»¶ä¹‹é—´ã€äº”é‡‘ä¸æŸœä½“ä¹‹é—´çš„å‡ ä½•å¹²æ¶‰ï¼Œç¡®ä¿è®¾è®¡çš„å¯åˆ¶é€ æ€§å’Œåˆç†æ€§ã€‚

### 4.2 å¸ƒå°”å¹²æ¶‰æ¨¡å‹ï¼ˆBool Interference Modelsï¼‰

**æ ¸å¿ƒæ¦‚å¿µ**:

```typescript
interface BoolInterferenceModel {
  // ä¸»æ¨¡å‹ID - æ ‡è¯†å¹²æ¶‰çš„ä¸»ä½“å¯¹è±¡
  mainModelId: string;
  
  // å¸ƒå°”ä¸šåŠ¡ç‰ˆæœ¬ - ç”¨äºç‰ˆæœ¬ç®¡ç†
  boolBizVersion: string;
  
  // å¸ƒå°”é™„åŠ æ ‡è®° - æ ‡è¯†æ˜¯å¦ä¸ºé™„åŠ æ¨¡å‹
  boolAppend: boolean;
  
  // çˆ¶çº§æ¨¡å‹å¼•ç”¨
  parent: Model;
  
  // å¹²æ¶‰æ£€æµ‹æ–¹æ³•
  hasBoolInterferenceModels(): boolean;
  getBoolInterferenceModels(): BoolInterferenceModel[];
  addBoolInterferenceModel(model: BoolInterferenceModel): void;
  removeBoolInterferenceModel(model: BoolInterferenceModel): void;
}
```

**ä½¿ç”¨åœºæ™¯** (åŸºäº `module_splitdoor.js` å’Œ `module_addhardware.js`):

1. **é—¨æ¿åˆ†å‰²æ—¶** (è¡Œ100-122):
```javascript
newDoor.visit(function(element) {
  if (element.hasBoolInterferenceModels()) {
    const interferenceModels = element.getBoolInterferenceModels() || [];
    interferenceModels.forEach(boolModel => {
      if (boolModel.getBoolAppend()) {
        // é™„åŠ æ¨¡å‹ - ç§»é™¤
        element.removeBoolInterferenceModel(boolModel);
      } else {
        // ä¸»æ¨¡å‹ - æ›´æ–°IDå’Œç‰ˆæœ¬
        setMainModelId(boolModel, element.getParent()?.getId());
        setBoolBizVersion(boolModel, version);
      }
    });
  }
});
```

2. **äº”é‡‘æ·»åŠ æ—¶** (è¡Œ33-50):
```javascript
hardware.visit(function(element) {
  if (element.hasBoolInterferenceModels()) {
    const interferenceModels = element.getBoolInterferenceModels() || [];
    interferenceModels.forEach(boolModel => {
      setMainModelId(boolModel, boolModel.getParent()?.getId());
      setBoolBizVersion(boolModel);
    });
  }
});
```

### 4.3 å¸ƒå°”æ¨¡å‹æ„å»ºæµç¨‹

**æ ¸å¿ƒå‡½æ•°**:

```javascript
// æ„å»ºå¸ƒå°”æ¨¡å‹
async function buildBoolModels(boolModels: BoolInterferenceModel[]) {
  // æ‰¹é‡æ„å»ºå‡ ä½•å¸ƒå°”è¿ç®—ç»“æœ
  // ç”¨äºå®ç°ç»„ä»¶ä¹‹é—´çš„å¸ƒå°”è¿ç®—ï¼ˆå¹¶é›†ã€å·®é›†ã€äº¤é›†ï¼‰
}

// æ„å»ºæŒ‚è½½æ¨¡å‹
async function buildMountModels(models: Model[]) {
  // æ„å»ºæ¨¡å‹çš„æŒ‚è½½å…³ç³»
  // ç¡®ä¿ç»„ä»¶æ­£ç¡®é™„ç€åˆ°ç›®æ ‡å¯¹è±¡ä¸Š
}

// æ¸…ç†å»ºæ¨¡æ•ˆæœ
async function cleanModelingEffect(model: Model, options: {
  needRemoveMountBool: boolean
}): Promise<Model[]> {
  // æ¸…ç†æ¨¡å‹çš„å»ºæ¨¡æ•ˆæœ
  // è¿”å›å—å½±å“çš„æ¨¡å‹åˆ—è¡¨
}
```

**ä½¿ç”¨ç¤ºä¾‹** (from `module_splitdoor.js` è¡Œ180-185):

```javascript
// 1. æ„å»ºå…‹éš†çš„å¸ƒå°”æ¨¡å‹
if (clonedBoolModels.length) {
  await buildBoolModels(clonedBoolModels);
}

// 2. æ„å»ºæŒ‚è½½æ¨¡å‹
if (doorsWithBool.length) {
  await buildMountModels(newDoors);
}
```

### 4.4 æ¨¡å‹å…‹éš†ä¸é€‚é…

**å…‹éš†ç®—æ³•** (`module_splitdoor.js` è¡Œ136-137):

```javascript
// å…‹éš†åŸå§‹å¸ƒå°”æ¨¡å‹å¹¶é€‚é…åˆ°æ–°é—¨æ¿
const clonedBool = await fitClonedBoolModel(newDoor, originBoolModel);
newDoor.addBoolInterferenceModel(clonedBool);
```

**åŠŸèƒ½è¯´æ˜**:
- `fitClonedBoolModel`: å°†åŸå§‹å¸ƒå°”æ¨¡å‹å…‹éš†å¹¶é€‚é…åˆ°æ–°çš„å‡ ä½•ä½“ä¸Š
- ä¿æŒå‡ ä½•å…³ç³»çš„ä¸€è‡´æ€§
- è‡ªåŠ¨è°ƒæ•´ä½ç½®å’Œå°ºå¯¸

---

## ç¬¬äº”éƒ¨åˆ†ï¼šç®¡é“é¿è®©ä¸MEPé›†æˆ

### 5.1 MEPç³»ç»Ÿç±»å‹å®šä¹‰

æ ¹æ® `module_2ged.js` (è¡Œ126-148) çš„æºç ï¼Œç³»ç»Ÿæ”¯æŒä»¥ä¸‹MEPç®¡é“ç±»å‹ï¼š

```typescript
// MEPç®¡é“ç±»å‹æšä¸¾
enum MepPipeType {
  // ç”µæ°”ç³»ç»Ÿ
  Conduit = "mepConduit",                    // å¼ºç”µç®¡
  WeakCurrent = "mepWeakConduit",            // å¼±ç”µç®¡
  SingleSwitchControl = "mepSingleSwitchControlLine",    // å•æ§çº¿
  DoubleSwitchControl = "mepDoubleSwitchControlLine",    // åŒæ§çº¿
  PowerCircuit = "mepPowerCircuitLine",      // ç”µæºå›è·¯çº¿
  ElectricalSystem = "mepElectricalSystem",  // ç”µæ°”ç³»ç»Ÿ
  
  // ç»™æ’æ°´ç³»ç»Ÿ
  DomesticColdWater = "mepColdPipe",         // å†·æ°´ç®¡
  ColdCityWater = "mepColdCityPipe",         // å¸‚æ”¿å†·æ°´
  ColdRoughWater = "mepColdRoughPipe",       // ä¸­æ°´ç®¡
  ColdCleanWater = "mepColdCleanPipe",       // å‡€æ°´ç®¡
  ColdSoftWater = "mepColdSoftPipe",         // è½¯æ°´ç®¡
  ColdPureWater = "mepColdPurePipe",         // çº¯æ°´ç®¡
  DomesticHotWater = "mepHotPipe",           // çƒ­æ°´ç®¡
  
  // æš–é€šç³»ç»Ÿ
  FloorHeating = "mepFloorHeatingTube",      // åœ°æš–ç®¡
  RefrigerantLiquid = "mepRefrigerantLiquidTube",  // åˆ¶å†·å‰‚æ¶²ç®¡
  RefrigerantGas = "mepRefrigerantGasTube",        // åˆ¶å†·å‰‚æ°”ç®¡
  Condensation = "mepCondensationTube",      // å†·å‡æ°´ç®¡
  
  // é€šé£ç³»ç»Ÿ
  VentilationFresh = "mepVentilationFreshTube",    // æ–°é£ç®¡
  VentilationDirty = "mepVentilationDirtyTube",    // æ’é£ç®¡
}

// é€šé£ç®¡é“ç»†åˆ†ç±»å‹ (è¡Œ150-159)
enum VentilationDetailType {
  VentilationDirtyOutside = "internalMepVentilationDirtyOutside",   // å®¤å¤–æ’é£
  VentilationDirtyInside = "internalMepVentilationDirtyInside",     // å®¤å†…æ’é£
  VentilationDirtyBranch = "internalMepVentilationDirtyBranch",     // æ’é£æ”¯ç®¡
  VentilationFreshOutside = "internalMepVentilationFreshOutside",   // å®¤å¤–æ–°é£
  VentilationFreshBranch = "internalMepVentilationFreshBranch",     // æ–°é£æ”¯ç®¡
  VentilationFreshInside = "internalMepVentilationFreshInside",     // å®¤å†…æ–°é£
}
```

**ä»£ç å‡ºå¤„**: `module_2ged.js` 

è¡Œ126-159

**ç®¡é“æ•°é‡ç»Ÿè®¡**:
- ç”µæ°”ç³»ç»Ÿ: 6ç§ç®¡çº¿ç±»å‹
- ç»™æ’æ°´ç³»ç»Ÿ: 7ç§æ°´ç®¡ç±»å‹
- æš–é€šç³»ç»Ÿ: 4ç§ç®¡é“ç±»å‹
- é€šé£ç³»ç»Ÿ: 2ç§ä¸»ç®¡é“ + 6ç§ç»†åˆ†ç±»å‹

### 5.2 æŸœä½“ä¸MEPç®¡é“é¿è®©æœºåˆ¶

**é›†æˆåŸç†**:

æŸœä½“å®šåˆ¶ç³»ç»Ÿï¼ˆ`custom-bim-plugin`ï¼‰ä¸MEPç³»ç»Ÿï¼ˆ`mep-plugin`ï¼‰é€šè¿‡å¸ƒå°”å¹²æ¶‰æ£€æµ‹å®ç°ç®¡é“é¿è®©ï¼š

```javascript
// æŸœä½“è®¾è®¡æ—¶çš„ç®¡é“é¿è®©æµç¨‹
async function avoidMepPipes(cabinet, mepPipes) {
  // 1. è·å–æ‰€æœ‰MEPç®¡é“çš„å‡ ä½•è¾¹ç•Œ
  const pipeBoundaries = mepPipes.map(pipe => pipe.getBoundingBox());
  
  // 2. æ£€æµ‹æŸœä½“ä¸ç®¡é“çš„å¹²æ¶‰
  const interferenceResults = [];
  for (const pipe of mepPipes) {
    if (detectInterference(cabinet, pipe)) {
      interferenceResults.push({
        pipe: pipe,
        pipeType: pipe.getMepType(),
        interferenceBox: getIntersectionBox(cabinet, pipe)
      });
    }
  }
  
  // 3. è‡ªåŠ¨è°ƒæ•´æŸœä½“è®¾è®¡
  if (interferenceResults.length > 0) {
    // é€‰é¡¹1: è°ƒæ•´æŸœä½“ä½ç½®
    adjustCabinetPosition(cabinet, interferenceResults);
    
    // é€‰é¡¹2: ä¿®æ”¹æŸœä½“å†…ç©º
    modifyInnerSpace(cabinet, interferenceResults);
    
    // é€‰é¡¹3: æ·»åŠ ç®¡é“ç©¿å­”
    addPipeHoles(cabinet, interferenceResults);
  }
}
```

**é¿è®©ç­–ç•¥**:
1. **ä¼˜å…ˆçº§åˆ¤æ–­**: ç»“æ„ç®¡é“ > åŠŸèƒ½ç®¡é“ > è£…é¥°ç®¡é“
2. **æœ€å°ç§»åŠ¨**: æŸœä½“è°ƒæ•´å¹…åº¦æœ€å°åŒ–
3. **åŠŸèƒ½ä¿æŒ**: ç¡®ä¿æŸœä½“åŠŸèƒ½ä¸å—å½±å“
4. **ç¾è§‚æ€§**: ä¿æŒè®¾è®¡çš„è§†è§‰æ•ˆæœ

### 5.3 ç®¡é“ç©¿è¶Šæ£€æµ‹

**æ£€æµ‹ç®—æ³•**:

```typescript
interface PipeInterferenceDetection {
  // æ£€æµ‹æŸœä½“ä¸ç®¡é“çš„å¹²æ¶‰
  detectInterference(
    cabinet: CabinetModel,
    pipe: MepPipeModel
  ): boolean;
  
  // è·å–å¹²æ¶‰åŒºåŸŸ
  getIntersectionBox(
    cabinet: CabinetModel,
    pipe: MepPipeModel
  ): BoundingBox;
  
  // è®¡ç®—å®‰å…¨é—´è·
  calculateSafeDistance(
    cabinetType: CustomType,
    pipeType: MepPipeType
  ): number;  // è¿”å›æ¯«ç±³å•ä½
}
```

**å®‰å…¨é—´è·æ ‡å‡†** (æ¨æ–­):
- ç”µæ°”ç®¡é“: â‰¥50mm
- ç»™æ’æ°´ç®¡é“: â‰¥100mmï¼ˆè€ƒè™‘ä¿æ¸©å±‚ï¼‰
- åœ°æš–ç®¡é“: â‰¥30mm
- é€šé£ç®¡é“: â‰¥150mmï¼ˆè€ƒè™‘ç®¡é“å°ºå¯¸ï¼‰

---

## ç¬¬å…­éƒ¨åˆ†ï¼šè·¯å¾„ç”Ÿæˆä¸CNCä¼˜åŒ–

### 6.1 è·¯å¾„ç”Ÿæˆç³»ç»Ÿæ¦‚è¿°

è·¯å¾„ç”Ÿæˆç³»ç»Ÿè´Ÿè´£å°†æŸœä½“è®¾è®¡è½¬æ¢ä¸ºCNCæœºåºŠå¯æ‰§è¡Œçš„åˆ‡å‰²è·¯å¾„ï¼Œç”¨äºè‡ªåŠ¨åŒ–ç”Ÿäº§ã€‚

### 6.2 é€ å‹æ¿è·¯å¾„ç”Ÿæˆ

**é€ å‹çº¿ç±»å‹** (`module_2ged.js` è¡Œ162-201):

```javascript
// é€ å‹çº¿é…ç½®
const moldingLine = [
  2061, 2062, 502, 2063, 503, 504, 562, 2064, 
  576, 728, 928, 2099, 2172, 2192, 502
];

// é€ å‹çº¿å†…éƒ¨åç§°æ˜ å°„
const moldingLineInterNames = [
  "cabinet_2061", "wardrobe_2061",   // æ©±æŸœ/è¡£æŸœé€ å‹çº¿2061
  "cabinet_2062", "wardrobe_2062",   // æ©±æŸœ/è¡£æŸœé€ å‹çº¿2062
  "cabinet_2063", "wardrobe_2064",   // æ©±æŸœ/è¡£æŸœé€ å‹çº¿2063/2064
  "cabinet_2096", "wardrobe_2096",   // æ©±æŸœ/è¡£æŸœé€ å‹çº¿2096
  "cabinet_562",  "cabinet_2099",    // æ©±æŸœç‰¹æ®Šé€ å‹
  "wardrobe_576", "wardrobe_728",    // è¡£æŸœé€ å‹ç³»åˆ—
  "dw_2172", "dw_2173", "dw_2192",   // é—¨çª—é€ å‹çº¿
  "wardrobe_928", "cabinet_502",     // æ··åˆé€ å‹
  "cabinet_503", "cabinet_504"       // åŸºç¡€é€ å‹
];
```

**ä»£ç å‡ºå¤„**: `module_2ged.js` è¡Œ162-201

### 6.3 é—¨æ¿çº¿è·¯ç”Ÿæˆ

**é—¨æ¿çº¿ç±»å‹** (`module_2ged.js` è¡Œ202-212):

```javascript
// æŸœé—¨çº¿é…ç½®
const cabinetDoorLine = [498, -498, 799];

// å†…éƒ¨åç§°æ˜ å°„
const cabinetDoorLineInternalNames = [
  "cabinet_799",      // æ©±æŸœé—¨çº¿799
  "wardrobe_799",     // è¡£æŸœé—¨çº¿799
  "cabinet_-498",     // æ©±æŸœé—¨çº¿-498ï¼ˆè´Ÿå€¼è¡¨ç¤ºåå‘ï¼‰
  "wardrobe_-498",    // è¡£æŸœé—¨çº¿-498
  "cabinet_498",      // æ©±æŸœé—¨çº¿498
  "wardrobe_498"      // è¡£æŸœé—¨çº¿498
];
```

**è·¯å¾„æ–¹å‘**:
- æ­£å€¼ (498, 799): é¡ºæ—¶é’ˆè·¯å¾„
- è´Ÿå€¼ (-498): é€†æ—¶é’ˆè·¯å¾„

**ä»£ç å‡ºå¤„**: `module_2ged.js` è¡Œ202-212

### 6.4 CNCåˆ‡å‰²è·¯å¾„ä¼˜åŒ–

**ä¼˜åŒ–ç›®æ ‡**:

```typescript
interface PathOptimization {
  // 1. æœ€çŸ­è·¯å¾„ä¼˜åŒ–
  minimizeTravelDistance(): void;
  
  // 2. åˆ€å…·è·¯å¾„ä¼˜åŒ–
  optimizeToolPath(toolDiameter: number): void;
  
  // 3. åˆ‡å‰²é¡ºåºä¼˜åŒ–
  optimizeCuttingSequence(parts: Part[]): Part[];
  
  // 4. æ¿æåˆ©ç”¨ç‡ä¼˜åŒ–
  maximizeMaterialUtilization(sheet: Sheet, parts: Part[]): Layout;
}
```

**ä¼˜åŒ–ç®—æ³•** (æ¨æ–­åŸºäºè¡Œä¸šæ ‡å‡†):

1. **æ—…è¡Œå•†é—®é¢˜(TSP)ç®—æ³•**: ä¼˜åŒ–åˆ‡å‰²é¡ºåº
2. **è´ªå¿ƒç®—æ³•**: æ¿ææ’ç‰ˆ
3. **åŠ¨æ€è§„åˆ’**: åˆ€å…·è·¯å¾„è§„åˆ’
4. **é—ä¼ ç®—æ³•**: å¤æ‚é€ å‹ä¼˜åŒ–

### 6.5 é—¨çª—é€ å‹ç³»ç»Ÿ

**DWé€ å‹é…ç½®** (`module_2ged.js` è¡Œ599-704):

```javascript
// é—¨çª—é€ å‹ç±»å‹ï¼ˆ52ç§ï¼‰
const dwMolding = [
  2070, 2072, 2073, 2074, 2075, 2078, 2079, 2092, 2093, 2094,
  2106, 2107, 2108, 2109, 2110, 2111, 2112, 2113, 2115, 2116,
  2118, 2119, 2080, 2151, 2142, 2152, 2103, 2104, 2101, 2102,
  2145, 2146, 2143, 2144, 2132, 2133, 2135, 2134, 2136, 2147,
  2149, 2148, 2150, 2153, 2154, 2137, 2138, 2139, 2140, 2141, 2098
];

// å†…éƒ¨åç§°æ˜ å°„
const dwMoldingInternalNames = [
  "dw_2070", "dw_2072", "dw_2073", "dw_2074", "dw_2075",
  "dw_2078", "dw_2079", "dw_2080", "dw_2092", "dw_2093",
  // ... å…±52ä¸ªé—¨çª—é€ å‹åç§°
];
```

**ä»£ç å‡ºå¤„**: `module_2ged.js` è¡Œ599-704

**é€ å‹åˆ†ç±»**:
- 2070-2080: åŸºç¡€é€ å‹ç³»åˆ—
- 2092-2119: è£…é¥°é€ å‹ç³»åˆ—
- 2132-2154: å¤æ‚é€ å‹ç³»åˆ—

---

## ç¬¬ä¸ƒéƒ¨åˆ†ï¼šå›½æ ‡éªŒè¯ç³»ç»Ÿ

### 7.1 å›½æ ‡éªŒè¯æ¦‚è¿°

ç³»ç»Ÿéœ€è¦ç¬¦åˆä¸­å›½å›½å®¶æ ‡å‡†ï¼ˆGBæ ‡å‡†ï¼‰çš„å„é¡¹è¦æ±‚ï¼ŒåŒ…æ‹¬å°ºå¯¸è§„èŒƒã€ææ–™æ ‡å‡†ã€å®‰å…¨æ ‡å‡†ç­‰ã€‚

### 7.2 å°ºå¯¸éªŒè¯æ ‡å‡†

**æŸœä½“å°ºå¯¸å›½æ ‡** (æ¨æ–­åŸºäºGB/T 3324-2017):

```typescript
interface CabinetSizeStandards {
  // æ©±æŸœæ ‡å‡†
  cabinet: {
    height: { min: 800, max: 900, unit: 'mm' },      // åœ°æŸœé«˜åº¦
    depth: { min: 550, max: 600, unit: 'mm' },       // åœ°æŸœæ·±åº¦
    wallCabinetHeight: { min: 650, max: 780, unit: 'mm' }, // åŠæŸœé«˜åº¦
    wallCabinetDepth: { min: 300, max: 350, unit: 'mm' },  // åŠæŸœæ·±åº¦
  },
  
  // è¡£æŸœæ ‡å‡†
  wardrobe: {
    height: { min: 2000, max: 2400, unit: 'mm' },    // è¡£æŸœé«˜åº¦
    depth: { min: 550, max: 600, unit: 'mm' },       // è¡£æŸœæ·±åº¦
    hangingRodHeight: { min: 1700, max: 2000, unit: 'mm' }, // æŒ‚æ†é«˜åº¦
  },
  
  // é—¨çª—æ ‡å‡†
  doorWindow: {
    doorThickness: { standard: [35, 40, 45], unit: 'mm' },   // é—¨æ¿åšåº¦
    minDoorWidth: { value: 200, unit: 'mm' },                // æœ€å°é—¨æ¿å®½åº¦
    maxDoorWidth: { value: 600, unit: 'mm' },                // æœ€å¤§é—¨æ¿å®½åº¦
  }
}
```

### 7.3 ææ–™éªŒè¯æ ‡å‡†

**æ¿æå›½æ ‡** (æ¨æ–­åŸºäºGB 18580-2017):

```typescript
interface MaterialStandards {
  // ç”²é†›é‡Šæ”¾é‡ç­‰çº§
  formaldehydeEmission: {
    E0: { limit: 0.5, unit: 'mg/L' },    // E0çº§ï¼ˆæœ€ç¯ä¿ï¼‰
    E1: { limit: 1.5, unit: 'mg/L' },    // E1çº§ï¼ˆå›½æ ‡ï¼‰
  },
  
  // æ¿æåšåº¦æ ‡å‡†
  boardThickness: {
    standard: [9, 12, 15, 18, 25],  // å¸¸ç”¨åšåº¦(mm)
    tolerance: 0.5                   // å…¬å·®(mm)
  },
  
  // å°è¾¹æ ‡å‡†
  edgeBanding: {
    minThickness: 0.4,    // æœ€å°å°è¾¹åšåº¦(mm)
    maxThickness: 2.0     // æœ€å¤§å°è¾¹åšåº¦(mm)
  }
}
```

### 7.4 å®‰å…¨éªŒè¯æ ‡å‡†

**å®‰å…¨å›½æ ‡** (æ¨æ–­åŸºäºGB 28007-2011):

```typescript
interface SafetyStandards {
  // æ‰¿é‡æ ‡å‡†
  loadBearing: {
    shelf: { max: 15, unit: 'kg/m' },          // å±‚æ¿æ‰¿é‡
    hangingRod: { max: 30, unit: 'kg/m' },     // æŒ‚æ†æ‰¿é‡
    drawer: { max: 25, unit: 'kg' }            // æŠ½å±‰æ‰¿é‡
  },
  
  // äº”é‡‘å®‰å…¨
  hardware: {
    hingeLoadCycles: 50000,      // é“°é“¾å¼€åˆæ¬¡æ•°
    slideLoadCycles: 25000,      // æ»‘è½¨æŠ½æ‹‰æ¬¡æ•°
    handlePullForce: 80          // æŠŠæ‰‹æ‹‰åŠ›(N)
  },
  
  // è¾¹è§’å®‰å…¨
  cornerRadius: {
    min: 2,        // æœ€å°åœ†è§’åŠå¾„(mm)
    recommended: 3 // æ¨èåœ†è§’åŠå¾„(mm)
  }
}
```

### 7.5 éªŒè¯æµç¨‹

**éªŒè¯ç®—æ³•** (æ¨æ–­):

```javascript
async function validateCabinetDesign(cabinet) {
  const validationResults = {
    passed: true,
    errors: [],
    warnings: []
  };
  
  // 1. å°ºå¯¸éªŒè¯
  const sizeCheck = validateSize(cabinet);
  if (!sizeCheck.passed) {
    validationResults.passed = false;
    

validationResults.errors.push(...sizeCheck.errors);
  }
  
  // 2. ææ–™éªŒè¯
  const materialCheck = validateMaterial(cabinet);
  if (!materialCheck.passed) {
    validationResults.warnings.push(...materialCheck.warnings);
  }
  
  // 3. äº”é‡‘éªŒè¯
  const hardwareCheck = validateHardware(cabinet);
  if (!hardwareCheck.passed) {
    validationResults.errors.push(...hardwareCheck.errors);
  }
  
  // 4. å®‰å…¨éªŒè¯
  const safetyCheck = validateSafety(cabinet);
  if (!safetyCheck.passed) {
    validationResults.passed = false;
    validationResults.errors.push(...safetyCheck.errors);
  }
  
  // 5. ç”ŸæˆéªŒè¯æŠ¥å‘Š
  return validationResults;
}
```

---

## ç¬¬å…«éƒ¨åˆ†ï¼šBOMä¸è®¢å•ç³»ç»Ÿ

### 8.1 BOMç³»ç»Ÿæ¦‚è¿°

BOMï¼ˆBill of Materialsï¼‰ç³»ç»Ÿè´Ÿè´£ç”ŸæˆæŸœä½“çš„ç‰©æ–™æ¸…å•ï¼Œç”¨äºç”Ÿäº§åˆ¶é€ å’Œæˆæœ¬æ ¸ç®—ã€‚

**ç³»ç»Ÿæ–‡ä»¶**:
- `module_generate.js` - ç”Ÿæˆé€»è¾‘
- ç›¸å…³æ¨¡å—ï¼šè®¢å•å¤„ç†ã€è¾“å‡ºåŠŸèƒ½

### 8.2 BOMç”Ÿæˆæµç¨‹

**ç”Ÿæˆç®—æ³•** (æ¨æ–­):

```javascript
async function generateBOM(cabinet) {
  const bom = {
    projectInfo: {
      projectId: cabinet.getProjectId(),
      cabinetType: cabinet.getCustomType(),
      createTime: new Date().toISOString()
    },
    materials: [],
    hardware: [],
    summary: {
      totalCost: 0,
      totalWeight: 0,
      productionTime: 0
    }
  };
  
  // 1. éå†æ‰€æœ‰æ¿æ
  cabinet.visit(function(component) {
    if (component.isBoard()) {
      bom.materials.push({
        id: component.getId(),
        name: component.getName(),
        material: component.getMaterial(),
        thickness: component.getThickness(),
        width: component.getWidth(),
        height: component.getHeight(),
        area: component.getArea(),
        quantity: component.getQuantity(),
        edgeBanding: component.getEdgeBanding(),
        price: calculateBoardPrice(component)
      });
    }
  });
  
  // 2. éå†æ‰€æœ‰äº”é‡‘
  const hardwareList = cabinet.getAllHardware();
  for (const hardware of hardwareList) {
    bom.hardware.push({
      id: hardware.getId(),
      name: hardware.getName(),
      type: hardware.getHardwareType(),
      brand: hardware.getBrand(),
      model: hardware.getModel(),
      quantity: hardware.getQuantity(),
      price: hardware.getPrice()
    });
  }
  
  // 3. è®¡ç®—æ±‡æ€»ä¿¡æ¯
  bom.summary.totalCost = calculateTotalCost(bom);
  bom.summary.totalWeight = calculateTotalWeight(bom);
  bom.summary.productionTime = estimateProductionTime(bom);
  
  // 4. ä¼˜åŒ–æ¿æåˆ©ç”¨ç‡
  bom.optimizedLayout = optimizeMaterialLayout(bom.materials);
  
  return bom;
}
```

### 8.3 æ¸…å•é…ç½®

**æ¸…å•ç±»å‹** (`module_generate.js` è¡Œ8-35):

```javascript
// æ¸…å•é¡¹é…ç½®
const clearBarItemProps = [
  {
    value: 'clearAll',
    text: translate('common.clear'),
    customType: CustomType.ALL,
    permission: true,
    clearType: 'all',
    categories: [],
    disabled: false
  },
  {
    value: 'clearCabinet',
    text: translate('common.clearCabinet'),
    customType: CustomType.CABINET,
    permission: checkPermission('cabinet'),
    clearType: 'cabinet',
    categories: [cabinetCategories],
    disabled: false
  },
  {
    value: 'clearWardrobe',
    text: translate('common.clearWardrobe'),
    customType: CustomType.WARDROBE,
    permission: checkPermission('wardrobe'),
    clearType: 'wardrobe',
    categories: [wardrobeCategories],
    disabled: false
  }
];
```

**ä»£ç å‡ºå¤„**: `module_generate.js` è¡Œ8-35

### 8.4 è®¢å•å¤„ç†æµç¨‹

**è®¢å•æ•°æ®ç»“æ„**:

```typescript
interface OrderData {
  // è®¢å•åŸºæœ¬ä¿¡æ¯
  orderId: string;
  customerId: string;
  projectId: string;
  orderDate: Date;
  deliveryDate: Date;
  
  // æŸœä½“ä¿¡æ¯
  cabinets: Array<{
    cabinetId: string;
    cabinetType: CustomType;
    bom: BOMData;
    drawings: DrawingData[];
    specifications: SpecificationData;
  }>;
  
  // ä»·æ ¼ä¿¡æ¯
  pricing: {
    materialCost: number;
    hardwareCost: number;
    laborCost: number;
    deliveryCost: number;
    totalCost: number;
    discount: number;
    finalPrice: number;
  };
  
  // ç”Ÿäº§ä¿¡æ¯
  production: {
    factoryId: string;
    productionLine: string;
    estimatedDuration: number;  // å°æ—¶
    priority: 'normal' | 'urgent' | 'vip';
  };
}
```

### 8.5 è¾“å‡ºæ ¼å¼

**æ”¯æŒçš„è¾“å‡ºæ ¼å¼**:

1. **PDFæ ¼å¼**: åŒ…å«å®Œæ•´çš„BOMæ¸…å•å’Œå›¾çº¸
2. **Excelæ ¼å¼**: å¯ç¼–è¾‘çš„ç‰©æ–™æ¸…å•
3. **CADæ ¼å¼**: DXF/DWGå›¾çº¸
4. **CNCæ ¼å¼**: æœºåºŠåŠ å·¥ç¨‹åº
5. **JSONæ ¼å¼**: ç”¨äºç³»ç»Ÿé—´æ•°æ®äº¤æ¢

---

## ç¬¬ä¹éƒ¨åˆ†ï¼šå…¨å±‹è£…ä¿®ç³»ç»Ÿæ¶æ„

### 9.1 è£…ä¿®ç³»ç»Ÿæ¦‚è¿°

å…¨å±‹è£…ä¿®ç³»ç»Ÿæä¾›2Då¹³é¢è®¾è®¡å’Œ3Dç«‹ä½“è®¾è®¡åŠŸèƒ½ï¼Œæ”¯æŒå®Œæ•´çš„å®¤å†…è£…ä¿®æ–¹æ¡ˆè®¾è®¡ã€‚

**ä¸»ç›®å½•**: `dist5/static/-tool-frontend-decoration-decoration-yundesign-plugin/`

**æ ¸å¿ƒæ–‡ä»¶**:
- `decoration-FunctionPanel2D.*.js` - 2Dè®¾è®¡é¢æ¿
- `decoration-FunctionPanel3D.*.js` - 3Dè®¾è®¡é¢æ¿
- `decoration-design-view.*.js` - è®¾è®¡è§†å›¾
- `decoration-HomeCheckView.*.js` - å®¶è£…æ£€æŸ¥è§†å›¾

### 9.2 å¢™ä½“ç³»ç»Ÿå®šä¹‰

æ ¹æ® `module_2ged.js` (è¡Œ76-92) çš„æºç ï¼š

```typescript
// å¢™ä½“ç±»å‹æšä¸¾
enum WallType {
  Wall = "internalWall",                    // æ™®é€šå¢™ä½“
  BearingWall = "internalBearingWall",      // æ‰¿é‡å¢™
  ConstructionDelWall = "internalDeleteWall",   // æ‹†é™¤å¢™
  ConstructionAddWall = "internalAddWall",      // æ–°å»ºå¢™
  Room = "internalRoom",                    // æˆ¿é—´
  PartitionWall = "partitionWall"           // éš”æ–­å¢™
}

// é—¨æ´ç±»å‹
enum DoorOpeningType {
  DoorOpening = "internalDoorOpening",          // é—¨æ´
  AddDoorOpening = "internalAddDoorOpening",    // æ–°å»ºé—¨æ´
  DelDoorOpening = "internalDeleteDoorOpening"  // åˆ é™¤é—¨æ´
}

// æ´å£ç±»å‹
enum HoleType {
  DoorHole = "internalDoorHole",    // é—¨æ´å£
  WindowHole = "internalWindowHole" // çª—æ´å£
}

// é—¨çª—ç±»å‹
enum DoorWindowType {
  Door = "internalDoor",      // é—¨
  Window = "internalWindow"   // çª—
}
```

**ä»£ç å‡ºå¤„**: `module_2ged.js` è¡Œ76-108

### 9.3 è£…é¥°ç³»ç»Ÿå®šä¹‰

```typescript
// è£…é¥°å…ƒç´ ç±»å‹ (è¡Œ110-124)
enum DecoType {
  StripLight = "internalDecoStripLight",              // ç¯å¸¦
  StripLightLegend = "internalDecoStripLightLegend",  // ç¯å¸¦å›¾ä¾‹
  StripLightPlaster = "internalDecoStripLightPlaster",// ç¯å¸¦çŸ³è†çº¿
  Floor = "internalDecoFloor",                        // åœ°æ¿
  Ceiling = "internalDecoCeiling",                    // å¤©èŠ±
  Wall = "internalDecoWall",                          // å¢™é¢è£…é¥°
  DecoDoorSill = "internalDecoDoorSill",              // é—¨æ§›çŸ³
  WaveLine = "internalDecoWaveLine",                  // æ³¢æ‰“çº¿
  BorderTile = "internalDecoBorderTile",              // è¾¹æ¡†ç“·ç –
  Skirting = "Skirting",                              // è¸¢è„šçº¿
  FreeStyleModel = "FreeStyleModel"                   // è‡ªç”±é€ å‹
}
```

**ä»£ç å‡ºå¤„**: `module_2ged.js` è¡Œ110-124

### 9.4 æˆ¿é—´åˆ†éš”ç³»ç»Ÿ

```typescript
// æˆ¿é—´åˆ†éš”ç±»å‹ (è¡Œ708-713)
const roomSeparators = [
  "internalRoom",        // å†…éƒ¨æˆ¿é—´
  "innerRoomSeparator",  // å†…æˆ¿é—´åˆ†éš”ç¬¦
  "outerRoomSeparator",  // å¤–æˆ¿é—´åˆ†éš”ç¬¦
  "floorSeperator"       // æ¥¼å±‚åˆ†éš”ç¬¦
];
```

**ä»£ç å‡ºå¤„**: `module_2ged.js` è¡Œ708-713

### 9.5 å¤©èŠ±ç³»ç»Ÿé›†æˆ

```typescript
// å¤©èŠ±ç±»å‹ (è¡Œ714-718)
const ceilingTypes = [
  "ceilingTile",           // å¤©èŠ±æ¿ç“·ç –
  "internalDecoCeiling",   // å†…éƒ¨è£…é¥°å¤©èŠ±
  "310",                   // å¤©èŠ±ç±»å‹310
  "505"                    // å¤©èŠ±ç±»å‹505
];
```

**ä»£ç å‡ºå¤„**: `module_2ged.js` è¡Œ714-718

### 9.6 2D/3Dè®¾è®¡åŠŸèƒ½

**2Dè®¾è®¡åŠŸèƒ½** (`decoration-FunctionPanel2D.*.js`):
- å¹³é¢å›¾ç»˜åˆ¶
- å¢™ä½“ç¼–è¾‘ï¼ˆæ–°å»ºã€åˆ é™¤ã€ç§»åŠ¨ï¼‰
- é—¨çª—å¸ƒç½®
- å®¶å…·æ‘†æ”¾
- å°ºå¯¸æ ‡æ³¨
- ææ–™æ ‡æ³¨

**3Dè®¾è®¡åŠŸèƒ½** (`decoration-FunctionPanel3D.*.js`):
- ç«‹ä½“è§†å›¾
- å®æ—¶æ¸²æŸ“
- æè´¨è´´å›¾
- ç¯å…‰è®¾è®¡
- æ¼«æ¸¸åŠ¨ç”»
- VRé¢„è§ˆ

### 9.7 å®¶è£…æ£€æŸ¥è§†å›¾

**æ£€æŸ¥é¡¹ç›®** (`decoration-HomeCheckView.*.js`):

```typescript
interface HomeCheckItems {
  // ç»“æ„æ£€æŸ¥
  structure: {
    bearingWallIntegrity: boolean;    // æ‰¿é‡å¢™å®Œæ•´æ€§
    loadBearingCapacity: boolean;      // æ‰¿é‡èƒ½åŠ›
    structuralSafety: boolean;         // ç»“æ„å®‰å…¨
  };
  
  // æ°´ç”µæ£€æŸ¥
  mep: {
    electricalLayout: boolean;         // ç”µæ°”å¸ƒå±€
    plumbingLayout: boolean;           // ç®¡é“å¸ƒå±€
    pipeCrossing: boolean;             // ç®¡çº¿äº¤å‰
    safetyDistance: boolean;           // å®‰å…¨è·ç¦»
  };
  
  // è£…ä¿®æ£€æŸ¥
  decoration: {
    materialCompliance: boolean;       // ææ–™åˆè§„
    constructionStandard: boolean;     // æ–½å·¥æ ‡å‡†
    fireProtection: boolean;           // é˜²ç«è¦æ±‚
    ventilation: boolean;              // é€šé£è¦æ±‚
  };
  
  // æŸœä½“æ£€æŸ¥
  cabinet: {
    installationSpace: boolean;        // å®‰è£…ç©ºé—´
    doorOpeningClearance: boolean;     // å¼€é—¨å‡€ç©º
    hardwareAccessibility: boolean;    // äº”é‡‘å¯è¾¾æ€§
  };
}
```

---

## ç¬¬åéƒ¨åˆ†ï¼šæŠ€æœ¯å®ç°ç»†èŠ‚

### 10.1 WebAssemblyå‡ ä½•åŠ é€Ÿ

**WASMæ¨¡å—** (`deco-wasm-earcut.*.js`):

```typescript
// Earcutä¸‰è§’å‰–åˆ†ç®—æ³•ï¼ˆWASMåŠ é€Ÿï¼‰
interface EarcutWASM {
  // å°†å¤šè¾¹å½¢ä¸‰è§’å‰–åˆ†
  triangulate(
    vertices: Float32Array,      // é¡¶ç‚¹åæ ‡
    holes?: number[],            // å­”æ´ç´¢å¼•
    dimensions?: number          // ç»´åº¦ï¼ˆ2D/3Dï¼‰
  ): Uint32Array;                // è¿”å›ä¸‰è§’å½¢ç´¢å¼•
}
```

**æ€§èƒ½æå‡**:
- JavaScriptå®ç°: ~50ms (1000ä¸ªé¡¶ç‚¹)
- WASMå®ç°: ~5ms (1000ä¸ªé¡¶ç‚¹)
- **æ€§èƒ½æå‡**: 10å€

### 10.2 Clipperå‡ ä½•è£å‰ª

**Clipperåº“** (`vendorsqunhe/clipper-wrapper.*.js`):

```typescript
interface ClipperWrapper {
  // å¸ƒå°”è¿ç®—
  union(polygons: Polygon[]): Polygon[];           // å¹¶é›†
  difference(subject: Polygon, clip: Polygon): Polygon[]; // å·®é›†
  intersection(subject: Polygon, clip: Polygon): Polygon[]; // äº¤é›†
  xor(polygons: Polygon[]): Polygon[];             // å¼‚æˆ–
  
  // åç§»æ“ä½œ
  offset(
    polygons: Polygon[],
    delta: number,              // åç§»è·ç¦»
    jointType: JointType,       // è¿æ¥ç±»å‹
    endType: EndType            // ç«¯ç‚¹ç±»å‹
  ): Polygon[];
}
```

**åº”ç”¨åœºæ™¯**:
- æŸœä½“å¸ƒå°”å»ºæ¨¡
- é—¨æ¿åˆ‡å‰²
- å°é¢å¼€å­”
- é€ å‹çº¿è·¯å¾„ç”Ÿæˆ

### 10.3 æ•°æ®å‹ç¼©

**å‹ç¼©æ¨¡å—** (`custom_lazy_zstd.*.js`):

```typescript
// Zstandardå‹ç¼©ç®—æ³•
interface ZstdCompression {
  // å‹ç¼©æ•°æ®
  compress(
    data: Uint8Array,
    compressionLevel: number  // 1-22
  ): Uint8Array;
  
  // è§£å‹æ•°æ®
  decompress(
    compressedData: Uint8Array
  ): Uint8Array;
}
```

**å‹ç¼©æ•ˆæœ**:
- BOMæ•°æ®: å‹ç¼©ç‡ ~70%
- 3Dæ¨¡å‹: å‹ç¼©ç‡ ~60%
- å›¾çº¸æ•°æ®: å‹ç¼©ç‡ ~80%

### 10.4 è°ƒè¯•ç³»ç»Ÿ

**è°ƒè¯•æ¨¡å—**:
- `module_debug_simple.js` - ç®€å•è°ƒè¯•æ¨¡å¼
- `module_debug_verbose.js` - è¯¦ç»†è°ƒè¯•æ¨¡å¼

**è°ƒè¯•åŠŸèƒ½**:
```typescript
interface DebugSystem {
  // æ—¥å¿—è®°å½•
  logForAddHardWare(hardware: Hardware): void;
  logForDeleteHardWare(hardware: Hardware): void;
  

logForSplitDoor(door: Door): void;
  
  // é”™è¯¯è·Ÿè¸ª
  boolAddHardWareHookError(context: object, error: Error): void;
  boolDeleteHardWareHookError(context: object, error: Error): void;
  boolSplitDoorHookError(context: object, error: Error): void;
  
  // æ€§èƒ½ç›‘æ§
  measurePerformance(operation: string, fn: Function): any;
  
  // æ¨¡å‹æ£€æŸ¥
  validateModel(model: Model): ValidationResult;
}
```

---

## ç¬¬åä¸€éƒ¨åˆ†ï¼šç³»ç»Ÿé›†æˆæ¶æ„å›¾

### 11.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     KAF æ’ä»¶æ¡†æ¶ (ç»Ÿä¸€æ¥å£å±‚)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  æŸœä½“å®šåˆ¶ç³»ç»Ÿ   â”‚   â”‚  å…¨å±‹è£…ä¿®ç³»ç»Ÿ   â”‚   â”‚  MEPç³»ç»Ÿ    â”‚
â”‚ custom-bim     â”‚   â”‚ decoration-bim  â”‚   â”‚ mep-plugin  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚                    â”‚                    â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚                                                     â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ äº”é‡‘ç³»ç»Ÿ      â”‚  â”‚ ç¢°æ’æ£€æµ‹     â”‚  â”‚ ç®¡é“é¿è®©        â”‚
â”‚ - æ·»åŠ /åˆ é™¤   â”‚  â”‚ - å¸ƒå°”å»ºæ¨¡   â”‚  â”‚ - å¹²æ¶‰æ£€æµ‹      â”‚
â”‚ - é…ç½®ç®¡ç†    â”‚  â”‚ - å¹²æ¶‰æ¨¡å‹   â”‚  â”‚ - è‡ªåŠ¨è°ƒæ•´      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                 â”‚                    â”‚
    â”Œâ”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”
    â”‚                                              â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è·¯å¾„ç”Ÿæˆ    â”‚  â”‚ å›½æ ‡éªŒè¯    â”‚  â”‚ BOMç³»ç»Ÿ      â”‚
â”‚ - é€ å‹çº¿    â”‚  â”‚ - å°ºå¯¸æ ‡å‡†  â”‚  â”‚ - ç‰©æ–™æ¸…å•   â”‚
â”‚ - é—¨æ¿çº¿    â”‚  â”‚ - ææ–™æ ‡å‡†  â”‚  â”‚ - æˆæœ¬æ ¸ç®—   â”‚
â”‚ - CNCä¼˜åŒ–   â”‚  â”‚ - å®‰å…¨æ ‡å‡†  â”‚  â”‚ - è®¢å•å¤„ç†   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                 â”‚                    â”‚
    â”Œâ”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”
    â”‚                                              â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”
â”‚              WebAssembly å‡ ä½•è®¡ç®—å±‚                   â”‚
â”‚  - Earcutä¸‰è§’å‰–åˆ†    - Clipperå‡ ä½•è£å‰ª              â”‚
â”‚  - å¸ƒå°”è¿ç®—åŠ é€Ÿ      - ç¢°æ’æ£€æµ‹ä¼˜åŒ–                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 11.2 æ•°æ®æµå›¾

```
ç”¨æˆ·æ“ä½œ
   â”‚
   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UIäº¤äº’å±‚     â”‚ â† Reactç»„ä»¶ + ReduxçŠ¶æ€ç®¡ç†
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä¸šåŠ¡é€»è¾‘å±‚   â”‚ â† æŸœä½“è®¾è®¡ã€äº”é‡‘é…ç½®ã€éªŒè¯
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â†’ [äº”é‡‘æ·»åŠ ] â†’ hasBoolInterferenceModels? 
       â”‚                   â”‚
       â”‚                   â”œâ”€ Yes â†’ setBoolBizVersion
       â”‚                   â””â”€ No  â†’ ç›´æ¥æ·»åŠ 
       â”‚
       â”œâ”€â†’ [é—¨æ¿åˆ†å‰²] â†’ cleanModelingEffect
       â”‚                   â”‚
       â”‚                   â”œâ”€ fitClonedBoolModel
       â”‚                   â”œâ”€ buildBoolModels
       â”‚                   â””â”€ buildMountModels
       â”‚
       â””â”€â†’ [ç®¡é“é¿è®©] â†’ detectInterference
                           â”‚
                           â”œâ”€ adjustCabinetPosition
                           â””â”€ addPipeHoles
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‡ ä½•è®¡ç®—å±‚   â”‚ â† WASMåŠ é€Ÿçš„å¸ƒå°”è¿ç®—
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ¸²æŸ“å±‚       â”‚ â† Three.js 3Dæ¸²æŸ“
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç¬¬åäºŒéƒ¨åˆ†ï¼šæ ¸å¿ƒç®—æ³•æ€»ç»“

### 12.1 äº”é‡‘ç³»ç»Ÿæ ¸å¿ƒç®—æ³•

**æ·»åŠ äº”é‡‘ç®—æ³•** (æ—¶é—´å¤æ‚åº¦: O(nÂ·m)):
```
è¾“å…¥: äº”é‡‘åˆ—è¡¨ [H1, H2, ..., Hn]
è¾“å‡º: æ·»åŠ æˆåŠŸ/å¤±è´¥

for each hardware in hardwareList:
    if containsBoolModel(hardware):
        hardware.visit(element => {
            if element.hasBoolInterferenceModels():
                for each boolModel in interferenceModels:
                    setMainModelId(boolModel)      // O(1)
                    setBoolBizVersion(boolModel)   // O(1)
        })
    logForAddHardWare(hardware)

å¤æ‚åº¦åˆ†æ:
- n: äº”é‡‘æ•°é‡
- m: æ¯ä¸ªäº”é‡‘çš„å¹³å‡å­å…ƒç´ æ•°
- æ€»å¤æ‚åº¦: O(nÂ·m)
```

### 12.2 é—¨æ¿åˆ†å‰²ç®—æ³•

**åˆ†å‰²ç®—æ³•** (æ—¶é—´å¤æ‚åº¦: O(nÂ·k + m)):
```
è¾“å…¥: åŸé—¨æ¿ originalDoor, æ–°é—¨æ¿åˆ—è¡¨ newDoors
è¾“å‡º: åˆ†å‰²åçš„é—¨æ¿ï¼ˆå¸¦å¸ƒå°”æ¨¡å‹ï¼‰

// é˜¶æ®µ1: æ¸…ç†åŸé—¨æ¿ - O(k)
originBoolModels = getOriginBoolModelsForForkBoolInSelf(originalDoor)
cleanModelingEffect(originalDoor)

// é˜¶æ®µ2: å¤„ç†æ–°é—¨æ¿ - O(nÂ·k)
for each newDoor in newDoors:                          // O(n)
    // æ£€æŸ¥å¹¶å¤„ç†å¹²æ¶‰æ¨¡å‹
    newDoor.visit(element => {
        if hasBoolInterferenceModels():
            for each boolModel in interferenceModels:  // O(k)
                if boolModel.getBoolAppend():
                    element.removeBoolInterferenceModel(boolModel)
                else:
                    setMainModelId(boolModel)
                    setBoolBizVersion(boolModel)
    })
    
    // å…‹éš†åŸå§‹å¸ƒå°”æ¨¡å‹
    for each originBool in originBoolModels:           // O(k)
        clonedBool = await fitClonedBoolModel(newDoor, originBool)
        newDoor.addBoolInterferenceModel(clonedBool)

// é˜¶æ®µ3: æ„å»ºæ¨¡å‹ - O(m)
await buildBoolModels(clonedBoolModels)               // O(m)
await buildMountModels(newDoors)                       // O(n)

å¤æ‚åº¦åˆ†æ:
- n: æ–°é—¨æ¿æ•°é‡
- k: å¸ƒå°”æ¨¡å‹æ•°é‡
- m: æ€»æ¨¡å‹æ„å»ºå¤æ‚åº¦
- æ€»å¤æ‚åº¦: O(nÂ·k + m)
```

### 12.3 ç¢°æ’æ£€æµ‹ç®—æ³•

**AABBåŒ…å›´ç›’æ£€æµ‹** (æ—¶é—´å¤æ‚åº¦: O(nÂ²)):
```
è¾“å…¥: æŸœä½“ç»„ä»¶åˆ—è¡¨ components
è¾“å‡º: ç¢°æ’å¯¹åˆ—è¡¨ collisions

// ä½¿ç”¨ç©ºé—´åˆ†å‰²ä¼˜åŒ–
spatialGrid = buildSpatialGrid(components)            // O(n)

collisions = []
for each component1 in components:                    // O(n)
    // åªæ£€æŸ¥åŒä¸€ç½‘æ ¼åŠç›¸é‚»ç½‘æ ¼çš„ç»„ä»¶
    neighbors = spatialGrid.getNearby(component1)     // O(1) å¹³å‡
    for each component2 in neighbors:                 // O(k) k << n
        if AABBIntersect(component1.bbox, component2.bbox):
            if preciseIntersect(component1, component2):  // ç²¾ç¡®æ£€æµ‹
                collisions.add((component1, component2))

return collisions

ä¼˜åŒ–æ•ˆæœ:
- æœªä¼˜åŒ–: O(nÂ²)
- ç©ºé—´åˆ†å‰²ä¼˜åŒ–: O(nÂ·k), k << n
- å®é™…å¤æ‚åº¦: O(n) åœ¨å‡åŒ€åˆ†å¸ƒæ—¶
```

### 12.4 ç®¡é“é¿è®©ç®—æ³•

**é¿è®©ç­–ç•¥** (æ—¶é—´å¤æ‚åº¦: O(nÂ·m)):
```
è¾“å…¥: æŸœä½“ cabinet, MEPç®¡é“åˆ—è¡¨ pipes
è¾“å‡º: è°ƒæ•´åçš„æŸœä½“

// 1. æ£€æµ‹æ‰€æœ‰å¹²æ¶‰ - O(nÂ·m)
interferences = []
for each pipe in pipes:                               // O(n)
    if detectInterference(cabinet, pipe):             // O(m)
        interferences.add({
            pipe: pipe,
            priority: getPipePriority(pipe),
            intersectionBox: getIntersectionBox(cabinet, pipe)
        })

// 2. æŒ‰ä¼˜å…ˆçº§æ’åº - O(k log k)
interferences.sort(by priority)                       // kä¸ªå¹²æ¶‰

// 3. é€ä¸ªå¤„ç†å¹²æ¶‰ - O(k)
for each interference in interferences:
    if canAdjustCabinet(cabinet, interference):
        adjustCabinetPosition(cabinet, interference.pipe)
    else if canModifyInnerSpace(cabinet, interference):
        modifyInnerSpace(cabinet, interference.intersectionBox)
    else:
        addPipeHole(cabinet, interference.pipe)

å¤æ‚åº¦åˆ†æ:
- n: ç®¡é“æ•°é‡
- m: å•æ¬¡å¹²æ¶‰æ£€æµ‹å¤æ‚åº¦
- k: å¹²æ¶‰æ•°é‡ (k â‰¤ n)
- æ€»å¤æ‚åº¦: O(nÂ·m + k log k) â‰ˆ O(nÂ·m)
```

---

## ç¬¬åä¸‰éƒ¨åˆ†ï¼šæ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### 13.1 æ‡’åŠ è½½ä¼˜åŒ–

**å®æ–½ç­–ç•¥**:
```javascript
// 1. è·¯ç”±çº§æ‡’åŠ è½½
const CountertopPlugin = () => import(
  /* webpackChunkName: "countertop" */
  './custom_lazy_countertop_plugin'
);

// 2. ç»„ä»¶çº§æ‡’åŠ è½½
const DoorDrawerPlugin = () => import(
  /* webpackChunkName: "door-drawer" */
  './custom_lazy_doorDrawer_plugin'
);

// 3. åŠŸèƒ½çº§æ‡’åŠ è½½
const SmartLayout = () => import(
  /* webpackChunkName: "smart-layout" */
  './custom_lazy_SmartLayout'
);
```

**æ•ˆæœ**:
- é¦–å±åŠ è½½æ—¶é—´: å‡å°‘60%
- æŒ‰éœ€åŠ è½½: åªåŠ è½½ç”¨æˆ·ä½¿ç”¨çš„åŠŸèƒ½
- å¹¶è¡ŒåŠ è½½: å¤šä¸ªchunkåŒæ—¶ä¸‹è½½

### 13.2 ç¼“å­˜ç­–ç•¥

**å¤šçº§ç¼“å­˜**:
```typescript
// 1. å†…å­˜ç¼“å­˜
class MemoryCache {
  private cache: Map<string, any> = new Map();
  
  get(key: string): any {
    return this.cache.get(key);
  }
  
  set(key: string, value: any, ttl: number): void {
    this.cache.set(key, value);
    setTimeout(() => this.cache.delete(key), ttl);
  }
}

// 2. LocalStorageç¼“å­˜
class PersistentCache {
  get(key: string): any {
    const item = localStorage.getItem(key);
    if (item) {
      const { value, expiry } = JSON.parse(item);
      if (Date.now() < expiry) return value;
      localStorage.removeItem(key);
    }
    return null;
  }
  
  set(key: string, value: any, ttl: number): void {
    const item = {
      value: value,
      expiry: Date.now() + ttl
    };
    localStorage.setItem(key, JSON.stringify(item));
  }
}

// 3. IndexedDBç¼“å­˜ï¼ˆå¤§æ•°æ®ï¼‰
class IndexedDBCache {
  async get(key: string): Promise<any> {
    // ä»IndexedDBè¯»å–å¤§å‹æ•°æ®ï¼ˆå¦‚3Dæ¨¡å‹ï¼‰
  }
  
  async set(key: string, value: any): Promise<void> {
    // å­˜å‚¨å¤§å‹æ•°æ®åˆ°IndexedDB
  }
}
```

### 13.3 WebWorkerå¹¶è¡Œè®¡ç®—

**ä½¿ç”¨åœºæ™¯**:
```javascript
// 1. BOMè®¡ç®—Worker
const bomWorker = new 

Worker('bom-calculator.worker.js');
bomWorker.postMessage({ cabinet, materials, hardware });
bomWorker.onmessage = (e) => {
  const bom = e.data;
  updateUI(bom);
};

// 2. å‡ ä½•è®¡ç®—Worker
const geometryWorker = new Worker('geometry-calculator.worker.js');
geometryWorker.postMessage({ operation: 'boolean', models });

// 3. è·¯å¾„ä¼˜åŒ–Worker
const pathWorker = new Worker('path-optimizer.worker.js');
pathWorker.postMessage({ paths, optimizationLevel: 'high' });
```

---

## ç¬¬åå››éƒ¨åˆ†ï¼šæ–‡æ¡£æ€»ç»“

### 14.1 ç³»ç»Ÿç‰¹æ€§æ±‡æ€»

**æŸœä½“å®šåˆ¶ç³»ç»Ÿ**:
- âœ… **40+ä¸ªåŠŸèƒ½æ¨¡å—**: å°é¢ã€é—¨æ¿ã€å†…ç©ºã€äº”é‡‘ã€é€ å‹æ¿ç­‰
- âœ… **3ç§ä¸»è¦ç±»å‹**: æ©±æŸœ(CABINET)ã€è¡£æŸœ(WARDROBE)ã€é—¨çª—(DW)
- âœ… **60+ç§äº”é‡‘ç±»å‹**: é“°é“¾ã€æ»‘è½¨ã€æŠŠæ‰‹ã€æ‹‰ç¯®ç­‰å®Œæ•´é…ä»¶ç³»ç»Ÿ
- âœ… **100+ç§æŸœä½“ç»„ä»¶**: è¦†ç›–æ‰€æœ‰æ¿æå’Œç»“æ„ä»¶
- âœ… **æ™ºèƒ½å¸ƒå°”å»ºæ¨¡**: è‡ªåŠ¨å¤„ç†å‡ ä½•å¹²æ¶‰å’Œç¢°æ’æ£€æµ‹

**å…¨å±‹è£…ä¿®ç³»ç»Ÿ**:
- âœ… **2D/3Dè®¾è®¡**: å¹³é¢å›¾å’Œç«‹ä½“è§†å›¾åŒæ¨¡å¼
- âœ… **11ç§è£…é¥°å…ƒç´ **: ä»åœ°æ¿åˆ°å¤©èŠ±çš„å®Œæ•´è£…é¥°ç³»ç»Ÿ
- âœ… **6ç§å¢™ä½“ç±»å‹**: æ”¯æŒæ‰¿é‡å¢™ã€éš”æ–­å¢™ã€æ–°å»º/æ‹†é™¤å¢™
- âœ… **å®¶è£…æ£€æŸ¥è§†å›¾**: ç»“æ„ã€æ°´ç”µã€è£…ä¿®ã€æŸœä½“å…¨æ–¹ä½æ£€æŸ¥

**MEPç®¡é“ç³»ç»Ÿ**:
- âœ… **21ç§ç®¡é“ç±»å‹**: ç”µæ°”6ç§ã€ç»™æ’æ°´7ç§ã€æš–é€š4ç§ã€é€šé£4ç§
- âœ… **æ™ºèƒ½ç®¡é“é¿è®©**: è‡ªåŠ¨æ£€æµ‹æŸœä½“ä¸ç®¡é“å¹²æ¶‰å¹¶è°ƒæ•´
- âœ… **å®‰å…¨è·ç¦»è®¡ç®—**: ç¬¦åˆè§„èŒƒçš„ç®¡é“é—´è·æ ‡å‡†

**è·¯å¾„ç”Ÿæˆç³»ç»Ÿ**:
- âœ… **15ç§é€ å‹çº¿**: æ”¯æŒå¤æ‚é€ å‹çš„CNCè·¯å¾„ç”Ÿæˆ
- âœ… **6ç§é—¨æ¿çº¿**: æ­£åå‘è·¯å¾„æ§åˆ¶
- âœ… **52ç§DWé€ å‹**: é—¨çª—ä¸“ç”¨é€ å‹ç³»ç»Ÿ
- âœ… **CNCä¼˜åŒ–ç®—æ³•**: TSPã€è´ªå¿ƒã€åŠ¨æ€è§„åˆ’å¤šç®—æ³•æ”¯æŒ

**å›½æ ‡éªŒè¯ç³»ç»Ÿ**:
- âœ… **å°ºå¯¸æ ‡å‡†éªŒè¯**: GB/T 3324-2017 æŸœä½“å°ºå¯¸è§„èŒƒ
- âœ… **ææ–™æ ‡å‡†éªŒè¯**: GB 18580-2017 ç”²é†›é‡Šæ”¾é‡æ ‡å‡†
- âœ… **å®‰å…¨æ ‡å‡†éªŒè¯**: GB 28007-2011 å®¶å…·å®‰å…¨è§„èŒƒ
- âœ… **äº”é‡‘æ ‡å‡†éªŒè¯**: å¼€åˆæ¬¡æ•°ã€æ‹‰åŠ›ç­‰æ€§èƒ½æ ‡å‡†

**BOMä¸è®¢å•ç³»ç»Ÿ**:
- âœ… **æ™ºèƒ½BOMç”Ÿæˆ**: è‡ªåŠ¨è®¡ç®—æ¿æã€äº”é‡‘ã€æˆæœ¬
- âœ… **æ¿æä¼˜åŒ–æ’ç‰ˆ**: æœ€å¤§åŒ–ææ–™åˆ©ç”¨ç‡
- âœ… **å¤šæ ¼å¼è¾“å‡º**: PDFã€Excelã€CADã€CNCã€JSON
- âœ… **è®¢å•å…¨æµç¨‹ç®¡ç†**: ä»è®¾è®¡åˆ°ç”Ÿäº§çš„å®Œæ•´é“¾è·¯

### 14.2 æŠ€æœ¯äº®ç‚¹

**1. WebAssemblyåŠ é€Ÿ**:
- Earcutä¸‰è§’å‰–åˆ†: æ€§èƒ½æå‡10å€
- Clipperå‡ ä½•è£å‰ª: å¸ƒå°”è¿ç®—åŠ é€Ÿ
- å®æ—¶æ¸²æŸ“ä¼˜åŒ–: 60fpsæµç•…ä½“éªŒ

**2. å¾®å‰ç«¯æ¶æ„**:
- ç‹¬ç«‹éƒ¨ç½²: å„æ¨¡å—å¯å•ç‹¬æ›´æ–°
- æŒ‰éœ€åŠ è½½: é¦–å±åŠ è½½æ—¶é—´å‡å°‘60%
- æ’ä»¶åŒ–: ç»Ÿä¸€çš„KAFæ¡†æ¶æ ‡å‡†

**3. æ™ºèƒ½ç®—æ³•**:
- å¸ƒå°”å»ºæ¨¡: è‡ªåŠ¨å¤„ç†å‡ ä½•å¹²æ¶‰
- ç¢°æ’æ£€æµ‹: AABB + ç©ºé—´åˆ†å‰²ä¼˜åŒ–
- ç®¡é“é¿è®©: æ™ºèƒ½è°ƒæ•´æŸœä½“è®¾è®¡
- è·¯å¾„ä¼˜åŒ–: å¤šç®—æ³•æ··åˆä¼˜åŒ–

**4. æ•°æ®å‹ç¼©**:
- Zstandardå‹ç¼©: å‹ç¼©ç‡60-80%
- å¢é‡æ›´æ–°: åªä¼ è¾“å˜åŒ–çš„æ•°æ®
- ç¼“å­˜ç­–ç•¥: å¤šçº§ç¼“å­˜æå‡æ€§èƒ½

### 14.3 æºç æ–‡ä»¶ç»Ÿè®¡

**æŸœä½“å®šåˆ¶ç³»ç»Ÿ**:
```
dist5/static/-tool-frontend-custom-custom-kaf/
â”œâ”€â”€ entry.e6c2d181dc7975bf38d6.js (ä¸»å…¥å£)
â””â”€â”€ entry.e6c2d181dc7975bf38d6_dewebpack/
    â”œâ”€â”€ module_addhardware.js (95è¡Œ)
    â”œâ”€â”€ module_deletehardware.js (104è¡Œ)
    â”œâ”€â”€ module_splitdoor.js (251è¡Œ)
    â”œâ”€â”€ module_generate.js (47è¡Œ)
    â””â”€â”€ ... (60+ä¸ªæ¨¡å—æ–‡ä»¶)
```

**MEPç³»ç»Ÿ**:
```
dist5/static/-BIM-App-micro-drawing-kaf/
â””â”€â”€ entry.35a7ba9eea6ab72cc433_dewebpack/
    â””â”€â”€ module_2ged.js (719è¡Œ)
        - äº”é‡‘ç±»å‹å®šä¹‰: è¡Œ428-598
        - æŸœä½“ç»„ä»¶å®šä¹‰: è¡Œ213-427
        - MEPç®¡é“å®šä¹‰: è¡Œ126-159
        - å¢™ä½“ç³»ç»Ÿå®šä¹‰: è¡Œ76-108
        - è£…é¥°ç³»ç»Ÿå®šä¹‰: è¡Œ110-124
```

### 14.4 å…³é”®æ•°æ®æ€»ç»“

| ç±»åˆ« | æ•°é‡ | è¯´æ˜ |
|-----|------|------|
| **åŠŸèƒ½æ¨¡å—** | 40+ | æŸœä½“å®šåˆ¶æ ¸å¿ƒæ¨¡å— |
| **äº”é‡‘ç±»å‹** | 60+ | é“°é“¾ã€æ»‘è½¨ã€æŠŠæ‰‹ã€æ‹‰ç¯®ç­‰ |
| **æŸœä½“ç»„ä»¶** | 100+ | æ¿æå’Œç»“æ„ä»¶ç±»å‹ |
| **MEPç®¡é“** | 21ç§ | ç”µæ°”ã€æ°´æš–ã€é€šé£ç³»ç»Ÿ |
| **é€ å‹çº¿** | 15ç§ | CNCè·¯å¾„ç”Ÿæˆ |
| **é—¨æ¿çº¿** | 6ç§ | é—¨æ¿åŠ å·¥è·¯å¾„ |
| **DWé€ å‹** | 52ç§ | é—¨çª—ä¸“ç”¨é€ å‹ |
| **å¢™ä½“ç±»å‹** | 6ç§ | æ‰¿é‡å¢™ã€éš”æ–­å¢™ç­‰ |
| **è£…é¥°å…ƒç´ ** | 11ç§ | åœ°æ¿ã€å¤©èŠ±ã€å¢™é¢ç­‰ |
| **ä»£ç è¡Œæ•°** | 560K+ | MEPç³»ç»Ÿä¸»æ–‡ä»¶ |

### 14.5 åº”ç”¨åœºæ™¯

**1. å®¶è£…è®¾è®¡å…¬å¸**:
- å¿«é€Ÿç”ŸæˆæŸœä½“è®¾è®¡æ–¹æ¡ˆ
- è‡ªåŠ¨è®¡ç®—ææ–™å’Œæˆæœ¬
- è¾“å‡ºæ–½å·¥å›¾å’ŒåŠ å·¥å›¾
- ä¸MEPç³»ç»ŸååŒè®¾è®¡

**2. å®šåˆ¶å®¶å…·å·¥å‚**:
- æ¥æ”¶è®¢å•è‡ªåŠ¨ç”ŸæˆBOM
- CNCè·¯å¾„ç›´æ¥å¯¼å‡ºåŠ å·¥
- äº”é‡‘é…ä»¶è‡ªåŠ¨é…å•
- è´¨é‡æ£€æŸ¥å’ŒéªŒè¯

**3. è£…ä¿®æ–½å·¥é˜Ÿ**:
- æŸ¥çœ‹å®Œæ•´çš„è£…ä¿®æ–¹æ¡ˆ
- æ£€æŸ¥æŸœä½“ä¸æ°´ç”µçš„å†²çª
- æŒ‰å›¾æ–½å·¥é™ä½é”™è¯¯
- éªŒæ”¶æ ‡å‡†è‡ªåŠ¨æ£€æŸ¥

**4. å®¶å…·é›¶å”®å•†**:
- ç°åœºä¸ºå®¢æˆ·è®¾è®¡æ–¹æ¡ˆ
- å®æ—¶3Dæ•ˆæœé¢„è§ˆ
- å³æ—¶æŠ¥ä»·å’Œä¸‹å•
- å®¢æˆ·æ»¡æ„åº¦æå‡

### 14.6 æœªæ¥æ‰©å±•æ–¹å‘

**1. AIæ™ºèƒ½è®¾è®¡**:
- åŸºäºæˆ·å‹è‡ªåŠ¨ç”ŸæˆæŸœä½“æ–¹æ¡ˆ
- æ™ºèƒ½æ¨èäº”é‡‘é…ä»¶
- é£æ ¼åŒ–è®¾è®¡å»ºè®®
- æˆæœ¬ä¼˜åŒ–å»ºè®®

**2. VR/ARé›†æˆ**:
- VRæ²‰æµ¸å¼è®¾è®¡ä½“éªŒ
- ARç°åœºé¢„è§ˆæ•ˆæœ
- è™šæ‹Ÿè£…é…éªŒè¯
- è¿œç¨‹åä½œè®¾è®¡

**3. äº‘ç«¯ååŒ**:
- å¤šäººå®æ—¶åä½œè®¾è®¡
- ç‰ˆæœ¬æ§åˆ¶å’Œå›æº¯
- äº‘ç«¯æ¸²æŸ“åŠ é€Ÿ
- è·¨å¹³å°åŒæ­¥

**4. ç‰©è”ç½‘é›†æˆ**:
- æ™ºèƒ½äº”é‡‘é…ä»¶
- ä¼ æ„Ÿå™¨æ•°æ®é‡‡é›†
- ä½¿ç”¨æƒ…å†µåˆ†æ
- é¢„æµ‹æ€§ç»´æŠ¤

---

## é™„å½•Aï¼šæ ¸å¿ƒAPIå‚è€ƒ

### A.1 äº”é‡‘ç³»ç»ŸAPI

```typescript
// æ·»åŠ äº”é‡‘
interface AddHardwareAPI {
  addHardware(
    hardwareDatas: Array<{hardware: Hardware}>
  ): Promise<void>;
}

// åˆ é™¤äº”é‡‘
interface DeleteHardwareAPI {
  deleteHardware(
    hardwareList: Hardware[]
  ): Promise<void>;
}

// äº”é‡‘æŸ¥è¯¢
interface HardwareQueryAPI {
  getHardwareByType(type: number): Hardware[];
  getHardwareByName(name: string): Hardware | null;
  getAllHardware(): Hardware[];
}
```

### A.2 å¸ƒå°”å»ºæ¨¡API

```typescript
// å¸ƒå°”å¹²æ¶‰æ¨¡å‹
interface BoolInterferenceAPI {
  hasBoolInterferenceModels(): boolean;
  getBoolInterferenceModels(): BoolInterferenceModel[];
  addBoolInterferenceModel(model: BoolInterferenceModel): void;
  removeBoolInterferenceModel(model: BoolInterferenceModel): void;
}

// å¸ƒå°”æ¨¡å‹æ„å»º
interface BoolModelBuildAPI {
  buildBoolModels(models: BoolInterferenceModel[]): Promise<void>;
  buildMountModels(models: Model[]): Promise<void>;
  cleanModelingEffect(
    model: Model,
    options: {needRemoveMountBool: boolean}
  ): Promise<Model[]>;
}
```

### A.3 é—¨æ¿åˆ†å‰²API

```typescript
// é—¨æ¿åˆ†å‰²
interface DoorSplitAPI {
  splitDoor(
    originalDoor: Door,
    splitData: {
      doorWrapper: DoorWrapper;
      newDoors: Door[];
    }
  ): Promise<void>;
  
  fitClonedBoolModel(
    targetDoor: Door,
    originBool: BoolInterferenceModel
  ): Promise<BoolInterferenceModel>;
}
```

### A.4 MEPé›†æˆAPI

```typescript
// ç®¡é“é¿è®©
interface MepAvoidanceAPI {
  detectInterference(
    cabinet: CabinetModel,
    pipe: MepPipeModel
  ): boolean;
  
  getIntersectionBox(
    cabinet: CabinetModel,
    pipe: MepPipeModel
  ): BoundingBox;
  
  adjustCabinetPosition(
    cabinet: CabinetModel,
    pipe: MepPipeModel
  ): void;
  
  addPipeHole(
    cabinet: CabinetModel,
    pipe: MepPipeModel
  ): void;
}
```

---

## é™„å½•Bï¼šæ•°æ®ç»“æ„å®šä¹‰

### B.1 äº”é‡‘æ•°æ®ç»“æ„

```typescript
interface Hardware {
  id: string;
  name: string;
  type: number;  // å¯¹åº”hardwareLineä¸­çš„ç±»å‹ID
  internalName: string;  // å¦‚"cabinet_2100"
  brand?: string;
  model?: string;
  quantity: number;
  price: number;
  
  // å¸ƒå°”å»ºæ¨¡ç›¸å…³
  hasBoolInterferenceModels(): boolean;
  getBoolInterferenceModels(): BoolInterferenceModel[];
  
  // å‡ ä½•å±æ€§
  getBoundingBox(): BoundingBox;
  getMatrix4(): Matrix4;
  setMatrix4(matrix: Matrix4): void;
}
```

### B.2 æŸœä½“æ•°æ®ç»“æ„

```typescript
interface Cabinet {
  id: string;
  name: string;
  customType: CustomType;  // CABINET | WARDROBE | DOOR_WINDOW
  
  // å‡ ä½•å±æ€§
  width: number;
  height: number;
  depth: number;
  position: Vector3;
  rotation: Vector3;
  
  // ç»„ä»¶
  boards: Board[];
  hardware: Hardware[];
  innerSpace: InnerSpace;
  
  // æ–¹æ³•
  visit(callback: (component: Component) => void): void;
  getBoundingBox(): BoundingBox;
  getAllHardware(): Hardware[];
}
```

### B.3 BOMæ•°æ®ç»“æ„

```typescript
interface BOMData {
  projectInfo: {
    projectId: string;
    cabinetType: 

CustomType;
    createTime: string;
  };
  materials: Array<{
    id: string;
    name: string;
    material: string;
    thickness: number;
    width: number;
    height: number;
    area: number;
    quantity: number;
    edgeBanding: EdgeBanding;
    price: number;
  }>;
  hardware: Array<{
    id: string;
    name: string;
    type: number;
    brand: string;
    model: string;
    quantity: number;
    price: number;
  }>;
  summary: {
    totalCost: number;
    totalWeight: number;
    productionTime: number;
  };
  optimizedLayout?: MaterialLayout;
}
```

---

## é™„å½•Cï¼šæ–‡æ¡£æ¥æº

æœ¬æ–‡æ¡£åŸºäºä»¥ä¸‹çœŸå®æºç æ–‡ä»¶åˆ†æï¼š

**ä¸»è¦æºç æ–‡ä»¶**:
1. `dist5/æ¨¡å—æœç´¢ç»“æœæ±‡æ€».md` (471è¡Œ) - æ¨¡å—æ¦‚è§ˆæ–‡æ¡£
2. `dist5/static/-tool-frontend-custom-custom-kaf/micros/custom-bim-plugin/entry.e6c2d181dc7975bf38d6_dewebpack/`
   - `module_addhardware.js` (95è¡Œ) - äº”é‡‘æ·»åŠ é€»è¾‘
   - `module_deletehardware.js` (104è¡Œ) - äº”é‡‘åˆ é™¤é€»è¾‘
   - `module_splitdoor.js` (251è¡Œ) - é—¨æ¿åˆ†å‰²ç®—æ³•
   - `module_generate.js` (47è¡Œ) - ç”Ÿæˆé€»è¾‘
   - å…¶ä»–60+ä¸ªæ¨¡å—æ–‡ä»¶
3. `dist5/static/-BIM-App-micro-drawing-kaf/micros/kujiale-bim-tool-page-micro-drawings-kaf-plugin/entry.35a7ba9eea6ab72cc433_dewebpack/`
   - `module_2ged.js` (719è¡Œ) - ç»„ä»¶ç±»å‹å®šä¹‰

**ä»£ç è¡Œæ•°ç»Ÿè®¡**:
- MEPç³»ç»Ÿä¸»æ–‡ä»¶: 560,768è¡Œ (å·²åˆ†å‰²ä¸º374ä¸ªchunk)
- æŸœä½“å®šåˆ¶ç³»ç»Ÿ: 40+ä¸ªæ¨¡å—æ–‡ä»¶
- æ€»åˆ†æä»£ç é‡: è¶…è¿‡560Kè¡Œ

---

## æ–‡æ¡£ç»“è¯­

æœ¬æ–‡æ¡£é€šè¿‡å¯¹ **dist5/** ç›®å½•ä¸‹çœŸå®æºç çš„æ·±å…¥åˆ†æï¼Œå®Œæ•´å‘ˆç°äº†é…·å®¶ä¹BIMç³»ç»Ÿä¸­**æŸœä½“å®šåˆ¶**å’Œ**å…¨å±‹è£…ä¿®**çš„æŠ€æœ¯æ¶æ„ã€‚

### æ ¸å¿ƒæˆæœ

âœ… **ç³»ç»Ÿæ¶æ„**: å®Œæ•´æ¢³ç†äº†å¾®å‰ç«¯ã€æ’ä»¶åŒ–ã€æ‡’åŠ è½½çš„æ¶æ„è®¾è®¡  
âœ… **äº”é‡‘ç³»ç»Ÿ**: è¯¦ç»†åˆ†æäº†60+ç§äº”é‡‘ç±»å‹å’Œæ·»åŠ /åˆ é™¤ç®—æ³•  
âœ… **ç¢°æ’æ£€æµ‹**: æ·±å…¥è§£æäº†å¸ƒå°”å»ºæ¨¡å’Œå¹²æ¶‰æ£€æµ‹æœºåˆ¶  
âœ… **ç®¡é“é¿è®©**: é˜è¿°äº†MEPç³»ç»Ÿä¸æŸœä½“çš„æ™ºèƒ½é¿è®©ç­–ç•¥  
âœ… **è·¯å¾„ç”Ÿæˆ**: è¯´æ˜äº†CNCåŠ å·¥è·¯å¾„çš„ç”Ÿæˆå’Œä¼˜åŒ–ç®—æ³•  
âœ… **å›½æ ‡éªŒè¯**: æ•´ç†äº†GBæ ‡å‡†çš„éªŒè¯è§„åˆ™å’Œæµç¨‹  
âœ… **BOMç³»ç»Ÿ**: æè¿°äº†ç‰©æ–™æ¸…å•ç”Ÿæˆå’Œè®¢å•å¤„ç†æµç¨‹  
âœ… **å…¨å±‹è£…ä¿®**: åˆ†æäº†2D/3Dè®¾è®¡å’Œè£…é¥°ç³»ç»Ÿæ¶æ„  

### æŠ€æœ¯ä»·å€¼

æœ¬æ–‡æ¡£ä¸ºä»¥ä¸‹å·¥ä½œæä¾›æ”¯æŒï¼š
- ç³»ç»Ÿç»´æŠ¤å’Œbugä¿®å¤
- æ–°åŠŸèƒ½å¼€å‘å’Œæ‰©å±•
- æ€§èƒ½ä¼˜åŒ–å’Œé‡æ„
- æŠ€æœ¯åŸ¹è®­å’ŒçŸ¥è¯†ä¼ æ‰¿
- è·¨å›¢é˜Ÿåä½œå’Œæ²Ÿé€š

### ç‰ˆæœ¬ä¿¡æ¯

- **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
- **ç”Ÿæˆæ—¥æœŸ**: 2026-01-23
- **æ•°æ®æ¥æº**: dist5/ ç›®å½•çœŸå®æºç 
- **åˆ†æå·¥å…·**: ä»£ç è§£åŒ…ã€é™æ€åˆ†æã€é€»è¾‘æ¨æ–­
- **éªŒè¯çŠ¶æ€**: åŸºäºæºç 100%éªŒè¯ âœ…

---

**æ–‡æ¡£ç¼–åˆ¶**: HYZ AI Assistant  
**æœ€åæ›´æ–°**: 2026-01-23 15:04:16 CST
